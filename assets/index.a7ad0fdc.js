import{_ as H}from"./ServerInput.vuevuetypescriptsetuptruelang.1e26c8eb.js";import{t as N,a as x,b$ as M,b as P,d as V,e as j,u as D,g as R,i as K,h,bd as q,T as G,c9 as J,b9 as X,ae as Y,H as O,r as b,C as W,M as F,J as v,I as m,K as y,E as $,bg as T,b3 as B,bs as Q,ca as Z,cb as ee,a3 as te,bD as E,cc as ne,cd as se,G as L,z as oe,b5 as ae,D as ie,ce as re,cf as ce}from"./index.21ae495e.js";import{i as le,s as ue,p as pe,a as de}from"./invoke.fa53378d.js";import{a as fe}from"./Tooltip.f9a19f10.js";import{_ as A}from"./Space.111ef330.js";import{_ as me}from"./Tag.6fe1c55a.js";import{a as _e}from"./Switch.e76cf8d8.js";import"./MyButton.vuevuetypescriptsetuptruelang.bf59888f.js";import"./request.82939ae6.js";import"./Dropdown.4be350fc.js";import"./utils.3fff9781.js";import"./ChevronRight.a62d0b50.js";import"./InputGroupLabel.132e70f2.js";import"./get-slot.af2c1dcf.js";const ge=N([N("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),x("spin-container",{position:"relative"},[x("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[M()])]),x("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),x("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[P("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),x("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),x("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[P("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),he={small:20,medium:18,large:16},ve=Object.assign(Object.assign({},D.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),ye=V({name:"Spin",props:ve,setup(o){const{mergedClsPrefixRef:u,inlineThemeDisabled:t}=j(o),a=D("Spin","-spin",ge,J,o,u),e=R(()=>{const{size:n}=o,{common:{cubicBezierEaseInOut:c},self:i}=a.value,{opacitySpinning:p,color:_,textColor:f}=i,w=typeof n=="number"?X(n):i[Y("size",n)];return{"--n-bezier":c,"--n-opacity-spinning":p,"--n-size":w,"--n-color":_,"--n-text-color":f}}),l=t?K("spin",R(()=>{const{size:n}=o;return typeof n=="number"?String(n):n[0]}),e,o):void 0;return{mergedClsPrefix:u,compitableShow:fe(o,["spinning","show"]),mergedStrokeWidth:R(()=>{const{strokeWidth:n}=o;if(n!==void 0)return n;const{size:c}=o;return he[typeof c=="number"?"medium":c]}),cssVars:t?void 0:e,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var o,u;const{$slots:t,mergedClsPrefix:a,description:e}=this,l=t.icon&&this.rotate,n=(e||t.description)&&h("div",{class:`${a}-spin-description`},e||((o=t.description)===null||o===void 0?void 0:o.call(t))),c=t.icon?h("div",{class:[`${a}-spin-body`,this.themeClass]},h("div",{class:[`${a}-spin`,l&&`${a}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):h("div",{class:[`${a}-spin-body`,this.themeClass]},h(q,{clsPrefix:a,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),n);return(u=this.onRender)===null||u===void 0||u.call(this),t.default?h("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},h("div",{class:[`${a}-spin-content`,this.compitableShow&&`${a}-spin-content--spinning`]},t),h(G,{name:"fade-in-transition"},{default:()=>this.compitableShow?c:null})):c}});var we={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function U(o){return o.replace(RegExp("^"+(o.match(/^(\t| )+/)||"")[0],"gm"),"")}function S(o){return(o+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(o,u){var t,a,e,l,n,c=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,i=[],p="",_=u||{},f=0;function w(s){var r=we[s[1]||""],g=i[i.length-1]==s;return r?r[1]?(g?i.pop():i.push(s),r[0|g]):r[0]:s}function d(){for(var s="";i.length;)s+=w(i[i.length-1]);return s}for(o=o.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(s,r,g){return _[r.toLowerCase()]=g,""}).replace(/^\n+|\n+$/g,"");e=c.exec(o);)a=o.substring(f,e.index),f=c.lastIndex,t=e[0],a.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+U(S(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),l=I(U(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",l=l.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+l+"</"+n+">"):e[8]?t='<img src="'+S(e[8])+'" alt="'+S(e[7])+'">':e[10]?(p=p.replace("<a>",'<a href="'+S(e[11]||_[a.toLowerCase()])+'">'),t=d()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+I(e[12]||e[15],_)+"</"+n+">":e[16]?t="<code>"+S(e[16])+"</code>":(e[17]||e[1])&&(t=w(e[17]||"--"))),p+=a,p+=t;return(p+o.substring(f)+d()).replace(/^\n+|\n+$/g,"")}const be={class:"flex-col items-center"},xe={class:"text-5"},$e=$("div",{id:"content"},null,-1),Ce=V({__name:"Updater",setup(o,{expose:u}){const{t}=O(),a=b(!1),e=b(!1);async function l(){var c,i;try{a.value=!0,await Z(),(c=window.$dialog)==null||c.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>ee()})}catch(p){(i=window.$notification)==null||i.error({title:t("failed to update"),description:`error: ${p}`,content:t("try again")})}finally{a.value=!1}}function n(c){c&&(e.value=!0,te(()=>{const i=document.getElementById("content");i&&(i.innerHTML=I(c))}))}return u({open:n}),(c,i)=>{const p=E,_=A,f=ye,w=ne,d=se;return W(),F(d,{show:y(e),"onUpdate:show":i[1]||(i[1]=s=>Q(e)?e.value=s:null),"mask-closable":!1,class:"w-50%"},{default:v(()=>[m(w,null,{default:v(()=>[m(f,{show:y(a)},{default:v(()=>[$("div",be,[$("div",xe,T(y(t)("new ver discover")),1),$e,m(_,{class:"flex-center mt-4"},{default:v(()=>[m(p,{onClick:i[0]||(i[0]=s=>e.value=!1)},{default:v(()=>[B(T(y(t)("cancel")),1)]),_:1}),m(p,{type:"success",onClick:l},{default:v(()=>[B(T(y(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const ke={class:"flex-col px-10 gap-y-4"},Se={class:"flex-center"},ze=$("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Te=$("span",{class:"text-5"},"Start",-1),Me=V({__name:"index",setup(o){const{t:u}=O(),t=b(""),a=b(!1),e=b(),l=L(),{updateCheckTime:n,getServer:c}=L(),i=b();async function p(d){var g,z;const s=Date.now(),r=l.update.lastCheckTime;if(d||!r||r&&r+864e5<s)try{const{shouldUpdate:C,manifest:k}=await re();n(s),C&&(k==null?void 0:k.body)?(e.value=JSON.parse(k.body)[l.locale],a.value=!0):(g=window.$message)==null||g.success(u("latest ver now"))}catch(C){(z=window.$notification)==null||z.error({title:u("failed get update info"),description:`error: ${C}`,content:u("retry manually")})}}async function _(){var d,s;try{const r=await le();(d=window.$message)==null||d.success(r)}catch(r){(s=window.$message)==null||s.error(r)}}const f=b(!1);async function w(d){var s;try{d?(await ue(c),await pe(),f.value=!0):(await de(),f.value=!1)}catch(r){(s=window.$message)==null||s.error(r)}}return oe(()=>{var d;if(a.value){const s=(d=window.$notification)==null?void 0:d.info({title:u("new ver discover"),content:u("whether upgrade"),action:()=>h(E,{text:!0,type:"primary",onClick:()=>{var r;s==null||s.destroy(),(r=i.value)==null||r.open(e.value)}},{default:()=>u("confirm")})})}}),ae(async()=>{t.value=await ce(),p()}),(d,s)=>{const r=me,g=_e,z=H,C=A;return W(),ie("div",ke,[$("div",Se,[ze,m(r,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:s[0]||(s[0]=k=>p(!0))},{default:v(()=>[B(" v"+T(y(t)),1)]),_:1})]),m(y(Ce),{ref_key:"updaterRef",ref:i},null,512),m(C,{class:"flex-center"},{default:v(()=>[m(y(E),{onClick:_},{default:v(()=>[B("\u5B89\u88C5\u8BC1\u4E66")]),_:1}),Te,m(g,{value:y(f),onUpdateValue:w},null,8,["value"]),m(z)]),_:1})])}}});export{Me as default};
