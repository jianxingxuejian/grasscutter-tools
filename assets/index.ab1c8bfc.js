import{t as H,a as S,b$ as F,b as O,d as L,e as ee,u as j,g as I,i as te,h as y,bd as ne,T as se,c9 as oe,b9 as ae,ae as ie,C as T,D as U,E as $,V as re,H as Z,G as N,r as b,M as K,J as h,I as m,K as r,bs as J,ca as Q,bg as P,b3 as B,cb as ce,cc as le,a3 as ue,bD as M,cd as de,z as pe,b5 as me,ce as _e,cf as fe,cg as he}from"./index.8a04bb1a.js";import{_ as ge}from"./MyButton.vuevuetypescriptsetuptruelang.33e7374c.js";import{_ as ve}from"./ServerInput.vuevuetypescriptsetuptruelang.ab6056ee.js";import{r as V,s as we,_ as ye,i as be,a as xe,p as $e,b as W}from"./SelectFile.vuevuetypescriptsetuptruelang.3553d096.js";import{a as qe}from"./Tooltip.ef638d2d.js";import{_ as X}from"./Space.b3358dfd.js";import{_ as ke}from"./Tag.1d4b2778.js";import{a as Ce}from"./Switch.2bcc562d.js";import"./request.cc45ab08.js";import"./Dropdown.9606c25f.js";import"./utils.1536f6a8.js";import"./ChevronRight.860ffb15.js";import"./InputGroupLabel.ed539de5.js";import"./get-slot.af2c1dcf.js";const Se=H([H("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),S("spin-container",{position:"relative"},[S("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[F()])]),S("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),S("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[O("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),S("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),S("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[O("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),Pe={small:20,medium:18,large:16},ze=Object.assign(Object.assign({},j.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),Te=L({name:"Spin",props:ze,setup(a){const{mergedClsPrefixRef:u,inlineThemeDisabled:t}=ee(a),s=j("Spin","-spin",Se,oe,a,u),e=I(()=>{const{size:o}=a,{common:{cubicBezierEaseInOut:d},self:c}=s.value,{opacitySpinning:_,color:g,textColor:v}=c,f=typeof o=="number"?ae(o):c[ie("size",o)];return{"--n-bezier":d,"--n-opacity-spinning":_,"--n-size":f,"--n-color":g,"--n-text-color":v}}),p=t?te("spin",I(()=>{const{size:o}=a;return typeof o=="number"?String(o):o[0]}),e,a):void 0;return{mergedClsPrefix:u,compitableShow:qe(a,["spinning","show"]),mergedStrokeWidth:I(()=>{const{strokeWidth:o}=a;if(o!==void 0)return o;const{size:d}=a;return Pe[typeof d=="number"?"medium":d]}),cssVars:t?void 0:e,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var a,u;const{$slots:t,mergedClsPrefix:s,description:e}=this,p=t.icon&&this.rotate,o=(e||t.description)&&y("div",{class:`${s}-spin-description`},e||((a=t.description)===null||a===void 0?void 0:a.call(t))),d=t.icon?y("div",{class:[`${s}-spin-body`,this.themeClass]},y("div",{class:[`${s}-spin`,p&&`${s}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),o):y("div",{class:[`${s}-spin-body`,this.themeClass]},y(ne,{clsPrefix:s,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${s}-spin`}),o);return(u=this.onRender)===null||u===void 0||u.call(this),t.default?y("div",{class:[`${s}-spin-container`,this.themeClass],style:this.cssVars},y("div",{class:[`${s}-spin-content`,this.compitableShow&&`${s}-spin-content--spinning`]},t),y(se,{name:"fade-in-transition"},{default:()=>this.compitableShow?d:null})):d}}),Be={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Le=$("path",{fill:"currentColor",d:"M7.1 11.35q.35-.7.725-1.35q.375-.65.825-1.3l-1.4-.275l-2.1 2.1Zm12.05-6.875q-1.75.05-3.737 1.025q-1.988.975-3.613 2.6q-1.05 1.05-1.875 2.25T8.7 12.6l2.85 2.825q1.05-.4 2.25-1.225q1.2-.825 2.25-1.875q1.625-1.625 2.6-3.6Q19.625 6.75 19.675 5q0-.1-.037-.2q-.038-.1-.113-.175q-.075-.075-.175-.113q-.1-.037-.2-.037Zm-5.5 6q-.575-.575-.575-1.413q0-.837.575-1.412t1.425-.575q.85 0 1.425.575q.575.575.575 1.412q0 .838-.575 1.413q-.575.575-1.425.575q-.85 0-1.425-.575Zm-.85 6.55L13.625 19l2.1-2.1l-.275-1.4q-.65.45-1.3.812q-.65.363-1.35.713Zm8.775-13.35q.2 2.75-.9 5.362q-1.1 2.613-3.475 4.988l.5 2.475q.1.5-.05.975q-.15.475-.5.825L14 21.45q-.375.375-.9.287q-.525-.087-.725-.587l-1.525-3.575L6.575 13.3L3 11.775q-.5-.2-.6-.725q-.1-.525.275-.9L5.825 7q.35-.35.838-.5q.487-.15.987-.05l2.475.5q2.375-2.375 4.988-3.475q2.612-1.1 5.362-.9q.2.025.4.112q.2.088.35.238q.15.15.237.35q.088.2.113.4Zm-17.65 12.3q.875-.875 2.137-.888q1.263-.012 2.138.863t.862 2.137q-.012 1.263-.887 2.138q-.625.625-2.087 1.075q-1.463.45-4.038.8q.35-2.575.8-4.038q.45-1.462 1.075-2.087Zm1.425 1.4q-.25.25-.5.913q-.25.662-.35 1.337q.675-.1 1.338-.337q.662-.238.912-.488q.3-.3.325-.725q.025-.425-.275-.725q-.3-.3-.725-.288q-.425.013-.725.313Z"},null,-1),Re=[Le];function Ie(a,u){return T(),U("svg",Be,Re)}const Ve={name:"material-symbols-rocket-launch-outline-rounded",render:Ie},Ne={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Me=re('<g fill="none" stroke="currentColor" stroke-dasharray="18" stroke-dashoffset="18" stroke-linecap="round" stroke-width="2"><path d="M12 5V19"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.3s" values="18;0"></animate></path><path d="M5 12H19"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="18;0"></animate></path></g>',1),Ee=[Me];function Ue(a,u){return T(),U("svg",Ne,Ee)}const Ze={name:"line-md-plus",render:Ue},Ae={class:"flex-col items-center gap-y-5"},De=L({__name:"StartupItems",setup(a,{expose:u}){u({show:c,launcher:x});const{t}=Z(),s=N(),{updateGamePath:e,updateModPath:p,updateAkebiPath:o}=s,d=b(!1);function c(){d.value=!0}const _=()=>f(e),g=()=>f(p),v=()=>f(o);async function f(i){const n=await we();n&&await i(n)}async function x(){var i;try{const n=s.mod.path;n&&await V(n);const l=s.launcher.akebiPath;if(l)await V(l);else{const w=s.launcher.gamePath;w&&await V(w)}}catch(n){(i=window.$message)==null||i.error(n)}}return(i,n)=>{const l=ye,w=Q;return T(),K(w,{show:r(d),"onUpdate:show":n[0]||(n[0]=q=>J(d)?d.value=q:null),preset:"card",title:r(t)("startup items"),"auto-focus":!1,class:"w-70%"},{default:h(()=>[$("div",Ae,[m(l,{value:r(s).launcher.gamePath,"button-text":r(t)("select"),placeholder:r(t)("select game"),onClick:_},null,8,["value","button-text","placeholder"]),m(l,{value:r(s).mod.path,"button-text":r(t)("select"),placeholder:r(t)("select 3dm"),onClick:g},null,8,["value","button-text","placeholder"]),m(l,{value:r(s).launcher.akebiPath,"button-text":r(t)("select"),placeholder:r(t)("select akebi"),onClick:v},null,8,["value","button-text","placeholder"])])]),_:1},8,["show","title"])}}});var He={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function G(a){return a.replace(RegExp("^"+(a.match(/^(\t| )+/)||"")[0],"gm"),"")}function z(a){return(a+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(a,u){var t,s,e,p,o,d=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,c=[],_="",g=u||{},v=0;function f(i){var n=He[i[1]||""],l=c[c.length-1]==i;return n?n[1]?(l?c.pop():c.push(i),n[0|l]):n[0]:i}function x(){for(var i="";c.length;)i+=f(c[c.length-1]);return i}for(a=a.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(i,n,l){return g[n.toLowerCase()]=l,""}).replace(/^\n+|\n+$/g,"");e=d.exec(a);)s=a.substring(v,e.index),v=d.lastIndex,t=e[0],s.match(/[^\\](\\\\)*\\$/)||((o=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+G(z(o).replace(/^\n+|\n+$/g,""))+"</code></pre>":(o=e[6])?(o.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),p=E(G(e[5].replace(/^\s*[>*+.-]/gm,""))),o==">"?o="blockquote":(o=o.match(/\./)?"ol":"ul",p=p.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+o+">"+p+"</"+o+">"):e[8]?t='<img src="'+z(e[8])+'" alt="'+z(e[7])+'">':e[10]?(_=_.replace("<a>",'<a href="'+z(e[11]||g[s.toLowerCase()])+'">'),t=x()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(o="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+E(e[12]||e[15],g)+"</"+o+">":e[16]?t="<code>"+z(e[16])+"</code>":(e[17]||e[1])&&(t=f(e[17]||"--"))),_+=s,_+=t;return(_+a.substring(v)+x()).replace(/^\n+|\n+$/g,"")}const Oe={class:"flex-col items-center"},We={class:"text-5"},Ge=$("div",{id:"content"},null,-1),je=L({__name:"Updater",setup(a,{expose:u}){const{t}=Z(),s=b(!1),e=b(!1);async function p(){var d,c;try{s.value=!0,await ce(),(d=window.$dialog)==null||d.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>le()})}catch(_){(c=window.$notification)==null||c.error({title:t("failed to update"),description:`error: ${_}`,content:t("try again")})}finally{s.value=!1}}function o(d){d&&(e.value=!0,ue(()=>{const c=document.getElementById("content");c&&(c.innerHTML=E(d))}))}return u({open:o}),(d,c)=>{const _=M,g=X,v=Te,f=de,x=Q;return T(),K(x,{show:r(e),"onUpdate:show":c[1]||(c[1]=i=>J(e)?e.value=i:null),"mask-closable":!1,class:"w-50%"},{default:h(()=>[m(f,null,{default:h(()=>[m(v,{show:r(s)},{default:h(()=>[$("div",Oe,[$("div",We,P(r(t)("new ver discover")),1),Ge,m(g,{class:"flex-center mt-4"},{default:h(()=>[m(_,{onClick:c[0]||(c[0]=i=>e.value=!1)},{default:h(()=>[B(P(r(t)("cancel")),1)]),_:1}),m(_,{type:"success",onClick:p},{default:h(()=>[B(P(r(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const Ke={class:"flex-col items-center px-10 gap-y-4"},Je={class:"flex-center"},Qe=$("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Xe={class:"text-5"},pt=L({__name:"index",setup(a){const{t:u}=Z(),t=b(""),s=b(!1),e=b(),p=N(),{updateCheckTime:o,getServer:d}=N(),c=b(),_=b();async function g(i){var w,q;const n=Date.now(),l=p.update.lastCheckTime;if(i||!l||l&&l+864e5<n)try{const{shouldUpdate:k,manifest:C}=await fe();o(n),k&&(C==null?void 0:C.body)?(e.value=JSON.parse(C.body)[p.locale],s.value=!0):(w=window.$message)==null||w.success(u("latest ver now"))}catch(k){(q=window.$notification)==null||q.error({title:u("failed get update info"),description:`error: ${k}`,content:u("retry manually")})}}async function v(){var i,n;try{const l=await be();(i=window.$message)==null||i.success(l)}catch(l){(n=window.$message)==null||n.error(l)}}const f=b(!1);async function x(i){var n;try{i?(await xe(d),await $e(),f.value=!0):(await W(),f.value=!1)}catch(l){(n=window.$message)==null||n.error(l)}}return pe(()=>{var i;if(s.value){const n=(i=window.$notification)==null?void 0:i.info({title:u("new ver discover"),content:u("whether upgrade"),action:()=>y(M,{text:!0,type:"primary",onClick:()=>{var l;n==null||n.destroy(),(l=c.value)==null||l.open(e.value)}},{default:()=>u("confirm")})})}}),me(async()=>{t.value=await he(),g()}),_e(window,"beforeunload",()=>{f.value&&W()}),(i,n)=>{const l=ke,w=ve,q=Ce,k=X,C=Ze,A=ge,Y=Ve;return T(),U("div",Ke,[$("div",Je,[Qe,m(l,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:n[0]||(n[0]=R=>g(!0))},{default:h(()=>[B(" v"+P(r(t)),1)]),_:1})]),m(r(je),{ref_key:"updaterRef",ref:c},null,512),m(r(De),{ref_key:"startupItemsRef",ref:_},null,512),m(k,{class:"flex-center"},{default:h(()=>[m(r(M),{onClick:v},{default:h(()=>[B(P(r(u)("install ca")),1)]),_:1}),m(w),$("span",Xe,P(r(u)("proxy start")),1),m(q,{value:r(f),onUpdateValue:x},null,8,["value"])]),_:1}),m(k,{class:"flex-center"},{default:h(()=>{var R,D;return[m(A,{text:r(u)("startup items"),onClick:(R=r(_))==null?void 0:R.show},{default:h(()=>[m(C)]),_:1},8,["text","onClick"]),m(A,{text:r(u)("launch"),onClick:(D=r(_))==null?void 0:D.launcher},{default:h(()=>[m(Y)]),_:1},8,["text","onClick"])]}),_:1})])}}});export{pt as default};
