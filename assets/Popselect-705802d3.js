import{b as k,p as M}from"./Tooltip-7915c0e9.js";import{c as A,N as I,a as B,h as U,m as O}from"./utils-9b01a455.js";import{C as V,D as $,G as F,H as b,I as z,W as D,a6 as v,y as L,z as R}from"./Icon-c17b099f.js";import{p as j}from"./light-60406c61.js";import{d as x,i as H,c as C,a0 as K,n as T,a1 as E,h as y,r as G,p as W}from"./vue-i18n.runtime.esm-bundler-151cb611.js";import{c as q}from"./Dropdown-b089b3a0.js";const N=V("n-popselect"),J=$("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),_={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},S=D(_),Q=x({name:"PopselectPanel",props:_,setup(e){const o=H(N),{mergedClsPrefixRef:t,inlineThemeDisabled:r}=F(e),h=b("Popselect","-pop-select",J,j,o.props,t),f=C(()=>A(e.options,B("value","children")));function n(s,d){const{onUpdateValue:a,"onUpdate:value":c,onChange:u}=e;a&&v(a,s,d),c&&v(c,s,d),u&&v(u,s,d)}function l(s){i(s.key)}function p(s){U(s,"action")||s.preventDefault()}function i(s){const{value:{getNode:d}}=f;if(e.multiple)if(Array.isArray(e.value)){const a=[],c=[];let u=!0;e.value.forEach(w=>{if(w===s){u=!1;return}const g=d(w);g&&(a.push(g.key),c.push(g.rawNode))}),u&&(a.push(s),c.push(d(s).rawNode)),n(a,c)}else{const a=d(s);a&&n([s],[a.rawNode])}else if(e.value===s&&e.cancelable)n(null,null);else{const a=d(s);a&&n(s,a.rawNode);const{"onUpdate:show":c,onUpdateShow:u}=o.props;c&&v(c,!1),u&&v(u,!1),o.setShow(!1)}T(()=>{o.syncPosition()})}K(E(e,"options"),()=>{T(()=>{o.syncPosition()})});const P=C(()=>{const{self:{menuBoxShadow:s}}=h.value;return{"--n-menu-box-shadow":s}}),m=r?z("select",void 0,P,o.props):void 0;return{mergedTheme:o.mergedThemeRef,mergedClsPrefix:t,treeMate:f,handleToggle:l,handleMenuMousedown:p,cssVars:r?void 0:P,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),y(I,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{action:()=>{var o,t;return((t=(o=this.$slots).action)===null||t===void 0?void 0:t.call(o))||[]},empty:()=>{var o,t;return((t=(o=this.$slots).empty)===null||t===void 0?void 0:t.call(o))||[]}})}}),X=Object.assign(Object.assign(Object.assign(Object.assign({},b.props),R(M,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},M.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),_),ne=x({name:"Popselect",props:X,inheritAttrs:!1,__popover__:!0,setup(e){const o=b("Popselect","-popselect",void 0,j,e),t=G(null);function r(){var n;(n=t.value)===null||n===void 0||n.syncPosition()}function h(n){var l;(l=t.value)===null||l===void 0||l.setShow(n)}return W(N,{props:e,mergedThemeRef:o,syncPosition:r,setShow:h}),Object.assign(Object.assign({},{syncPosition:r,setShow:h}),{popoverInstRef:t,mergedTheme:o})},render(){const{mergedTheme:e}=this,o={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(t,r,h,f,n)=>{const{$attrs:l}=this;return y(Q,Object.assign({},l,{class:[l.class,t],style:[l.style,h]},L(this.$props,S),{ref:q(r),onMouseenter:O([f,l.onMouseenter]),onMouseleave:O([n,l.onMouseleave])}),{action:()=>{var p,i;return(i=(p=this.$slots).action)===null||i===void 0?void 0:i.call(p)},empty:()=>{var p,i;return(i=(p=this.$slots).empty)===null||i===void 0?void 0:i.call(p)}})}};return y(k,Object.assign({},R(this.$props,S),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var t,r;return(r=(t=this.$slots).default)===null||r===void 0?void 0:r.call(t)}})}});export{ne as _};
