import{t as N,a as x,b$ as H,b as V,d as I,e as M,u as L,g as R,i as j,h as w,bd as A,T as K,c9 as q,b9 as F,ae as G,H as U,r as $,C as O,M as J,J as _,I as f,K as m,E as k,bg as T,b3 as C,bs as X,ca as Y,cb as Q,a3 as Z,bD as z,cc as ee,cd as te,G as P,z as ne,b5 as se,D as oe,bt as ae,ce as ie,cf as re}from"./index.48dc8e7a.js";import{i as ce,p as le}from"./invoke.258605d2.js";import{a as ue}from"./use-compitable.7e23d9a5.js";import{_ as W}from"./Space.8c452016.js";import{_ as de}from"./Tag.2290c850.js";import{_ as pe}from"./Switch.921b24a1.js";import"./get-slot.af2c1dcf.js";const fe=N([N("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),x("spin-container",{position:"relative"},[x("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[H()])]),x("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),x("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[V("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),x("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),x("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[V("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),me={small:20,medium:18,large:16},_e=Object.assign(Object.assign({},L.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),ge=I({name:"Spin",props:_e,setup(s){const{mergedClsPrefixRef:u,inlineThemeDisabled:t}=M(s),o=L("Spin","-spin",fe,q,s,u),e=R(()=>{const{size:n}=s,{common:{cubicBezierEaseInOut:c},self:a}=o.value,{opacitySpinning:d,color:y,textColor:h}=a,p=typeof n=="number"?F(n):a[G("size",n)];return{"--n-bezier":c,"--n-opacity-spinning":d,"--n-size":p,"--n-color":y,"--n-text-color":h}}),r=t?j("spin",R(()=>{const{size:n}=s;return typeof n=="number"?String(n):n[0]}),e,s):void 0;return{mergedClsPrefix:u,compitableShow:ue(s,["spinning","show"]),mergedStrokeWidth:R(()=>{const{strokeWidth:n}=s;if(n!==void 0)return n;const{size:c}=s;return me[typeof c=="number"?"medium":c]}),cssVars:t?void 0:e,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){var s,u;const{$slots:t,mergedClsPrefix:o,description:e}=this,r=t.icon&&this.rotate,n=(e||t.description)&&w("div",{class:`${o}-spin-description`},e||((s=t.description)===null||s===void 0?void 0:s.call(t))),c=t.icon?w("div",{class:[`${o}-spin-body`,this.themeClass]},w("div",{class:[`${o}-spin`,r&&`${o}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):w("div",{class:[`${o}-spin-body`,this.themeClass]},w(A,{clsPrefix:o,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${o}-spin`}),n);return(u=this.onRender)===null||u===void 0||u.call(this),t.default?w("div",{class:[`${o}-spin-container`,this.themeClass],style:this.cssVars},w("div",{class:[`${o}-spin-content`,this.compitableShow&&`${o}-spin-content--spinning`]},t),w(K,{name:"fade-in-transition"},{default:()=>this.compitableShow?c:null})):c}});var he={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function D(s){return s.replace(RegExp("^"+(s.match(/^(\t| )+/)||"")[0],"gm"),"")}function S(s){return(s+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(s,u){var t,o,e,r,n,c=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,a=[],d="",y=u||{},h=0;function p(i){var g=he[i[1]||""],v=a[a.length-1]==i;return g?g[1]?(v?a.pop():a.push(i),g[0|v]):g[0]:i}function l(){for(var i="";a.length;)i+=p(a[a.length-1]);return i}for(s=s.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(i,g,v){return y[g.toLowerCase()]=v,""}).replace(/^\n+|\n+$/g,"");e=c.exec(s);)o=s.substring(h,e.index),h=c.lastIndex,t=e[0],o.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+D(S(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),r=E(D(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",r=r.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+r+"</"+n+">"):e[8]?t='<img src="'+S(e[8])+'" alt="'+S(e[7])+'">':e[10]?(d=d.replace("<a>",'<a href="'+S(e[11]||y[o.toLowerCase()])+'">'),t=l()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+E(e[12]||e[15],y)+"</"+n+">":e[16]?t="<code>"+S(e[16])+"</code>":(e[17]||e[1])&&(t=p(e[17]||"--"))),d+=o,d+=t;return(d+s.substring(h)+l()).replace(/^\n+|\n+$/g,"")}const ve={class:"flex-col items-center"},ye={class:"text-5"},we=k("div",{id:"content"},null,-1),be=I({__name:"Updater",setup(s,{expose:u}){const{t}=U(),o=$(!1),e=$(!1);async function r(){var c,a;try{o.value=!0,await Y(),(c=window.$dialog)==null||c.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>Q()})}catch(d){(a=window.$notification)==null||a.error({title:t("failed to update"),description:`error: ${d}`,content:t("try again")})}finally{o.value=!1}}function n(c){c&&(e.value=!0,Z(()=>{const a=document.getElementById("content");a&&(a.innerHTML=E(c))}))}return u({open:n}),(c,a)=>{const d=z,y=W,h=ge,p=ee,l=te;return O(),J(l,{show:m(e),"onUpdate:show":a[1]||(a[1]=i=>X(e)?e.value=i:null),"mask-closable":!1,class:"w-50%"},{default:_(()=>[f(p,null,{default:_(()=>[f(h,{show:m(o)},{default:_(()=>[k("div",ve,[k("div",ye,T(m(t)("new ver discover")),1),we,f(y,{class:"flex-center mt-4"},{default:_(()=>[f(d,{onClick:a[0]||(a[0]=i=>e.value=!1)},{default:_(()=>[C(T(m(t)("cancel")),1)]),_:1}),f(d,{type:"success",onClick:r},{default:_(()=>[C(T(m(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const xe={class:"flex-col px-10 gap-y-4"},$e={class:"flex-center"},Ce=k("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),ke={class:"text-6"},Ne=I({__name:"index",setup(s){const{t:u}=U(),t=$(""),o=$(!1),e=$(),r=P(),{updateProxy:n,updateCheckTime:c}=P(),a=$();async function d(p){var g,v;const l=Date.now(),i=r.update.lastCheckTime;if(p||!i||i&&i+864e5<l)try{const{shouldUpdate:b,manifest:B}=await ie();c(l),b&&(B==null?void 0:B.body)?(e.value=JSON.parse(B.body)[r.locale],o.value=!0):(g=window.$message)==null||g.success(u("latest ver now"))}catch(b){(v=window.$notification)==null||v.error({title:u("failed get update info"),description:`error: ${b}`,content:u("retry manually")})}}async function y(){var p,l;try{const i=await ce();(p=window.$message)==null||p.success(i)}catch(i){(l=window.$message)==null||l.error(i)}}function h(){le()}return ne(()=>{var p;if(o.value){const l=(p=window.$notification)==null?void 0:p.info({title:u("new ver discover"),content:u("whether upgrade"),action:()=>w(z,{text:!0,type:"primary",onClick:()=>{var i;l==null||l.destroy(),(i=a.value)==null||i.open(e.value)}},{default:()=>u("confirm")})})}}),se(async()=>{t.value=await re(),d()}),(p,l)=>{const i=de,g=pe,v=W;return O(),oe("div",xe,[k("div",$e,[Ce,f(i,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:l[0]||(l[0]=b=>d(!0))},{default:_(()=>[C(" v"+T(m(t)),1)]),_:1})]),f(m(be),{ref_key:"updaterRef",ref:a},null,512),f(v,{class:"flex-center"},{default:_(()=>[k("span",ke,T(m(u)("use proxy system")),1),f(g,{value:m(r).proxy.enable,"onUpdate:value":l[1]||(l[1]=b=>m(n)({enable:b}))},null,8,["value"]),ae(' <n-input-number v-if="setting.proxy.enable" :show-button="false" class="w-22!" /> ')]),_:1}),f(v,null,{default:_(()=>[f(m(z),{onClick:y},{default:_(()=>[C("\u5B89\u88C5\u8BC1\u4E66")]),_:1}),f(m(z),{onClick:h},{default:_(()=>[C("\u5F00\u542F")]),_:1}),f(m(z),{onClick:h},{default:_(()=>[C("\u5173\u95ED")]),_:1})]),_:1})])}}});export{Ne as default};
