import{t as j,a as T,b$ as re,b as K,d as L,e as de,u as F,g as U,i as ue,h as C,bd as _e,T as pe,c9 as he,b9 as me,ae as fe,C as S,D as P,E as d,V as ee,H as E,G as N,r as y,M as te,J as $,I as i,K as s,bs as O,ca as ne,bg as z,b3 as H,cb as ve,cc as ge,a3 as we,bD as A,cd as be,z as $e,af as xe,ce as ke,b5 as ye,cf as qe,cg as Ce}from"./index.0032a87b.js";import{a as Se,_ as Me}from"./MyButton.vuevuetypescriptsetuptruelang.95464bf1.js";import{_ as ze}from"./ServerInput.vuevuetypescriptsetuptruelang.b92e96c5.js";import{r as R,s as Pe,_ as Ie,i as Ze,a as J,p as Q,b as X}from"./SelectFile.vuevuetypescriptsetuptruelang.a9b3f28b.js";import{_ as Te}from"./Checkbox.edf1b702.js";import{_ as Ve}from"./plugin-vueexport-helper.2444895f.js";import{a as Be}from"./Tooltip.8b913542.js";import{_ as se}from"./Space.d6b9a019.js";import{_ as He}from"./Tag.6edb3338.js";import{a as Le}from"./Switch.dc311df3.js";import"./request.972595d0.js";import"./Dropdown.417ac27b.js";import"./utils.9b30c0a8.js";import"./ChevronRight.23ee4624.js";import"./InputGroupLabel.6bad9e35.js";import"./get-slot.8207e825.js";const Ue=j([j("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),T("spin-container",{position:"relative"},[T("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[re()])]),T("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),T("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[K("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),T("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),T("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[K("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),Re={small:20,medium:18,large:16},Ne=Object.assign(Object.assign({},F.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),Ae=L({name:"Spin",props:Ne,setup(o){const{mergedClsPrefixRef:c,inlineThemeDisabled:t}=de(o),l=F("Spin","-spin",Ue,he,o,c),e=U(()=>{const{size:a}=o,{common:{cubicBezierEaseInOut:u},self:r}=l.value,{opacitySpinning:m,color:g,textColor:f}=r,w=typeof a=="number"?me(a):r[fe("size",a)];return{"--n-bezier":u,"--n-opacity-spinning":m,"--n-size":w,"--n-color":g,"--n-text-color":f}}),p=t?ue("spin",U(()=>{const{size:a}=o;return typeof a=="number"?String(a):a[0]}),e,o):void 0;return{mergedClsPrefix:c,compitableShow:Be(o,["spinning","show"]),mergedStrokeWidth:U(()=>{const{strokeWidth:a}=o;if(a!==void 0)return a;const{size:u}=o;return Re[typeof u=="number"?"medium":u]}),cssVars:t?void 0:e,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var o,c;const{$slots:t,mergedClsPrefix:l,description:e}=this,p=t.icon&&this.rotate,a=(e||t.description)&&C("div",{class:`${l}-spin-description`},e||((o=t.description)===null||o===void 0?void 0:o.call(t))),u=t.icon?C("div",{class:[`${l}-spin-body`,this.themeClass]},C("div",{class:[`${l}-spin`,p&&`${l}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),a):C("div",{class:[`${l}-spin-body`,this.themeClass]},C(_e,{clsPrefix:l,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${l}-spin`}),a);return(c=this.onRender)===null||c===void 0||c.call(this),t.default?C("div",{class:[`${l}-spin-container`,this.themeClass],style:this.cssVars},C("div",{class:[`${l}-spin-content`,this.compitableShow&&`${l}-spin-content--spinning`]},t),C(pe,{name:"fade-in-transition"},{default:()=>this.compitableShow?u:null})):u}}),De={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ee=d("path",{fill:"currentColor",d:"M7.1 11.35q.35-.7.725-1.35q.375-.65.825-1.3l-1.4-.275l-2.1 2.1Zm12.05-6.875q-1.75.05-3.737 1.025q-1.988.975-3.613 2.6q-1.05 1.05-1.875 2.25T8.7 12.6l2.85 2.825q1.05-.4 2.25-1.225q1.2-.825 2.25-1.875q1.625-1.625 2.6-3.6Q19.625 6.75 19.675 5q0-.1-.037-.2q-.038-.1-.113-.175q-.075-.075-.175-.113q-.1-.037-.2-.037Zm-5.5 6q-.575-.575-.575-1.413q0-.837.575-1.412t1.425-.575q.85 0 1.425.575q.575.575.575 1.412q0 .838-.575 1.413q-.575.575-1.425.575q-.85 0-1.425-.575Zm-.85 6.55L13.625 19l2.1-2.1l-.275-1.4q-.65.45-1.3.812q-.65.363-1.35.713Zm8.775-13.35q.2 2.75-.9 5.362q-1.1 2.613-3.475 4.988l.5 2.475q.1.5-.05.975q-.15.475-.5.825L14 21.45q-.375.375-.9.287q-.525-.087-.725-.587l-1.525-3.575L6.575 13.3L3 11.775q-.5-.2-.6-.725q-.1-.525.275-.9L5.825 7q.35-.35.838-.5q.487-.15.987-.05l2.475.5q2.375-2.375 4.988-3.475q2.612-1.1 5.362-.9q.2.025.4.112q.2.088.35.238q.15.15.237.35q.088.2.113.4Zm-17.65 12.3q.875-.875 2.137-.888q1.263-.012 2.138.863t.862 2.137q-.012 1.263-.887 2.138q-.625.625-2.087 1.075q-1.463.45-4.038.8q.35-2.575.8-4.038q.45-1.462 1.075-2.087Zm1.425 1.4q-.25.25-.5.913q-.25.662-.35 1.337q.675-.1 1.338-.337q.662-.238.912-.488q.3-.3.325-.725q.025-.425-.275-.725q-.3-.3-.725-.288q-.425.013-.725.313Z"},null,-1),Oe=[Ee];function We(o,c){return S(),P("svg",De,Oe)}const Ge={name:"material-symbols-rocket-launch-outline-rounded",render:We},je={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ke=ee('<g fill="none" stroke="currentColor" stroke-dasharray="18" stroke-dashoffset="18" stroke-linecap="round" stroke-width="2"><path d="M12 5V19"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.3s" values="18;0"></animate></path><path d="M5 12H19"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="18;0"></animate></path></g>',1),Je=[Ke];function Qe(o,c){return S(),P("svg",je,Je)}const Xe={name:"line-md-plus",render:Qe},Ye={class:"inline-block",viewBox:"0 0 48 48",width:"1em",height:"1em"},Fe=["id"],et=ee('<g fill="none"><path fill="#fff" d="M23.794 44.518c-3.659 0-7.017-1.225-9.179-3.053c-1.098.328-2.502.855-3.389 1.51c-.759.56-.664 1.13-.527 1.361c.6 1.013 10.296.647 13.095.332v-.15Zm0 0c3.659 0 7.016-1.225 9.179-3.053c1.097.328 2.502.855 3.389 1.51c.758.56.663 1.13.526 1.361c-.6 1.013-10.295.647-13.094.332v-.15Z"></path><path fill="#fff" d="M23.814 22.591c6.042-.04 10.884-1.21 12.525-1.658c.39-.107.6-.3.6-.3c.001-.055.025-.983.025-1.462c0-8.066-3.808-16.17-13.172-16.171c-9.364 0-13.171 8.105-13.171 16.171c0 .48.023 1.407.025 1.462c0 0 .17.18.481.267c1.515.421 6.448 1.65 12.643 1.691h.044Zm16.418 6.72c-.375-1.206-.886-2.61-1.404-3.96c0 0-.297-.037-.448.006c-4.645 1.35-10.275 2.21-14.566 2.158h-.044c-4.267.05-9.858-.8-14.488-2.136c-.177-.05-.526-.029-.526-.029c-.518 1.35-1.029 2.756-1.403 3.96c-1.786 5.748-1.208 8.126-.767 8.18c.945.114 3.68-4.327 3.68-4.327c0 4.513 4.073 11.441 13.403 11.505h.247c9.329-.064 13.403-6.992 13.403-11.505c0 0 2.734 4.44 3.68 4.327c.44-.054 1.019-2.432-.767-8.18Z"></path><path fill="#000" d="M20.46 14.916c-1.27.057-2.355-1.39-2.423-3.23c-.07-1.84.904-3.378 2.174-3.436c1.27-.057 2.354 1.39 2.423 3.23c.07 1.84-.904 3.38-2.174 3.436Zm9.088-3.23c-.068 1.84-1.153 3.287-2.424 3.23c-1.27-.057-2.242-1.595-2.173-3.436c.069-1.84 1.154-3.286 2.423-3.23c1.27.058 2.243 1.596 2.174 3.437Zm2.257 5.828c-.34-.751-3.758-1.59-7.99-1.59h-.046c-4.232 0-7.65.839-7.99 1.59a.253.253 0 0 0-.025.108c0 .052.017.102.047.145c.286.416 4.082 2.477 7.968 2.477h.046c3.886 0 7.682-2.06 7.968-2.477a.256.256 0 0 0 .047-.146a.25.25 0 0 0-.025-.106"></path><path fill="#fff" d="M22.022 11.714c.058.727-.34 1.373-.89 1.443c-.549.07-1.04-.461-1.1-1.188c-.057-.727.341-1.373.89-1.443c.55-.071 1.042.461 1.1 1.188Zm3.49.243c.112-.201.877-1.259 2.46-.874c.415.102.608.25.648.309c.06.086.077.21.016.375c-.12.329-.369.32-.506.256c-.09-.042-1.192-.777-2.208.32c-.07.075-.195.1-.313.012c-.119-.09-.167-.272-.097-.398Z"></path><path fill="#000" d="M23.814 27.25h-.045c-2.918.035-6.455-.351-9.882-1.027c-.293 1.699-.47 3.834-.318 6.38c.384 6.433 4.205 10.478 10.104 10.536h.24c5.898-.058 9.718-4.103 10.103-10.537c.152-2.546-.025-4.68-.319-6.379c-3.426.676-6.965 1.063-9.883 1.027"></path><path fill="#fff" d="M15.504 26.712v6.332s2.9.585 5.807.18v-5.841a53.39 53.39 0 0 1-5.807-.671Z"></path><path fill="#fff" d="M36.938 20.634s-5.642 1.78-13.124 1.831h-.044c-7.47-.05-13.105-1.825-13.124-1.831l-1.89 4.716c4.726 1.425 10.584 2.343 15.014 2.29h.044c4.43.053 10.287-.865 15.014-2.29l-1.89-4.716Z"></path></g>',1),tt=[et],nt=["mask"];function st(o,c){return S(),P("svg",Ye,[d("mask",{id:o.idMap.svgIDa},tt,8,Fe),d("path",{fill:"currentColor",d:"M0 0h48v48H0z",mask:"url(#"+o.idMap.svgIDa+")"},null,8,nt)])}const ot={name:"icon-park-solid-tencent-qq",render:st,data(){return{idMap:{svgIDa:"uicons-"+(()=>Math.random().toString(36).substr(2,10))()}}}},at={class:"inline-block",viewBox:"0 0 32 32",width:"1em",height:"1em"},ct=d("path",{fill:"currentColor",d:"M25.7 7.1C23.9 6.3 22 5.7 20 5.3h-.1c-.2.4-.5 1-.7 1.5c-2.2-.3-4.3-.3-6.4 0c-.2-.5-.5-1-.7-1.5H12c-2 .3-3.9.9-5.7 1.8C2.7 12.5 1.7 17.8 2.2 23v.1c2.4 1.8 4.7 2.8 7 3.5h.1c.5-.7 1-1.5 1.4-2.3v-.1c-.8-.3-1.5-.6-2.2-1c-.1 0-.1-.1 0-.1c.1-.1.3-.2.4-.3H9c4.6 2.1 9.5 2.1 14.1 0h.1c.1.1.3.2.4.3c.1 0 0 .1 0 .1c-.7.4-1.4.8-2.2 1c0 0-.1.1 0 .1c.4.8.9 1.6 1.4 2.3h.1c2.3-.7 4.6-1.8 7-3.5V23c.6-6-1-11.2-4.2-15.9zM11.4 19.9c-1.4 0-2.5-1.3-2.5-2.8s1.1-2.8 2.5-2.8s2.5 1.3 2.5 2.8c0 1.5-1.1 2.8-2.5 2.8zm9.3 0c-1.4 0-2.5-1.3-2.5-2.8s1.1-2.8 2.5-2.8s2.5 1.3 2.5 2.8c0 1.5-1.1 2.8-2.5 2.8z"},null,-1),it=[ct];function lt(o,c){return S(),P("svg",at,it)}const rt={name:"carbon-logo-discord",render:lt},dt={class:"inline-block",viewBox:"0 0 32 32",width:"1em",height:"1em"},ut=d("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2Z"},null,-1),_t=[ut];function pt(o,c){return S(),P("svg",dt,_t)}const ht={name:"carbon-logo-github",render:pt},mt={class:"inline-block",viewBox:"0 0 32 32",width:"1em",height:"1em"},ft=d("path",{fill:"currentColor",d:"M24 24v2h2.46A5.94 5.94 0 0 1 22 28a6.007 6.007 0 0 1-6-6h-2a7.984 7.984 0 0 0 14 5.265V30h2v-6zm-2-10a8.04 8.04 0 0 0-6 2.735V14h-2v6h6v-2h-2.46A5.94 5.94 0 0 1 22 16a6.007 6.007 0 0 1 6 6h2a8.01 8.01 0 0 0-8-8z"},null,-1),vt=d("path",{fill:"currentColor",d:"M12 28H6v-4h2v-2H6v-5h2v-2H6v-5h2V8H6V4h18v8h2V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4H2v2h2v5H2v2h2v5H2v2h2v4a2 2 0 0 0 2 2h6Z"},null,-1),gt=[ft,vt];function wt(o,c){return S(),P("svg",mt,gt)}const bt={name:"carbon-change-catalog",render:wt},$t={class:"flex-col items-center gap-y-5"},xt={class:"flex-center w-full"},kt={class:"flex-center w-full"},yt={class:"flex-center w-full"},qt=L({__name:"StartupItems",setup(o,{expose:c}){c({show:f,launcherAll:q});const{t}=E(),l=N(),{launcher:e,mod:p,updateGamePath:a,updateModPath:u,updateAkebiPath:r,updateLauncher:m}=l,g=y(!1);function f(){g.value=!0}const w=()=>x(a),M=()=>x(u),v=()=>x(r);async function x(_){const n=await Pe();n&&await _(n)}async function q(){var _;try{const n=p.path;n&&e.modStart&&await R(n);const h=e.akebiPath;if(h&&e.akebiStart)await R(h);else{const k=e.gamePath;k&&e.gameStart&&await R(k)}}catch(n){(_=window.$message)==null||_.error(n)}}return(_,n)=>{const h=Te,k=Ie,I=ne;return S(),te(I,{show:s(g),"onUpdate:show":n[3]||(n[3]=b=>O(g)?g.value=b:null),preset:"card",title:s(t)("startup items"),"auto-focus":!1,class:"w-70%"},{default:$(()=>[d("div",$t,[d("div",xt,[i(h,{checked:s(e).gameStart,"onUpdate:checked":[n[0]||(n[0]=b=>s(e).gameStart=b),s(m)],class:"w-7 mr-4"},null,8,["checked","onUpdate:checked"]),i(k,{value:s(e).gamePath,"button-text":s(t)("select"),placeholder:s(t)("select game"),onClick:w},null,8,["value","button-text","placeholder"])]),d("div",kt,[i(h,{checked:s(e).modStart,"onUpdate:checked":[n[1]||(n[1]=b=>s(e).modStart=b),s(m)],class:"w-7 mr-4"},null,8,["checked","onUpdate:checked"]),i(k,{value:s(p).path,"button-text":s(t)("select"),placeholder:s(t)("select 3dm"),onClick:M},null,8,["value","button-text","placeholder"])]),d("div",yt,[i(h,{checked:s(e).akebiStart,"onUpdate:checked":[n[2]||(n[2]=b=>s(e).akebiStart=b),s(m)],class:"w-7 mr-4"},null,8,["checked","onUpdate:checked"]),i(k,{value:s(e).akebiPath,"button-text":s(t)("select"),placeholder:s(t)("select akebi"),onClick:v},null,8,["value","button-text","placeholder"])])])]),_:1},8,["show","title"])}}});const Ct=Ve(qt,[["__scopeId","data-v-e60a3e73"]]);var St={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function Y(o){return o.replace(RegExp("^"+(o.match(/^(\t| )+/)||"")[0],"gm"),"")}function B(o){return(o+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function D(o,c){var t,l,e,p,a,u=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,r=[],m="",g=c||{},f=0;function w(v){var x=St[v[1]||""],q=r[r.length-1]==v;return x?x[1]?(q?r.pop():r.push(v),x[0|q]):x[0]:v}function M(){for(var v="";r.length;)v+=w(r[r.length-1]);return v}for(o=o.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(v,x,q){return g[x.toLowerCase()]=q,""}).replace(/^\n+|\n+$/g,"");e=u.exec(o);)l=o.substring(f,e.index),f=u.lastIndex,t=e[0],l.match(/[^\\](\\\\)*\\$/)||((a=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+Y(B(a).replace(/^\n+|\n+$/g,""))+"</code></pre>":(a=e[6])?(a.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),p=D(Y(e[5].replace(/^\s*[>*+.-]/gm,""))),a==">"?a="blockquote":(a=a.match(/\./)?"ol":"ul",p=p.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+a+">"+p+"</"+a+">"):e[8]?t='<img src="'+B(e[8])+'" alt="'+B(e[7])+'">':e[10]?(m=m.replace("<a>",'<a href="'+B(e[11]||g[l.toLowerCase()])+'">'),t=M()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(a="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+D(e[12]||e[15],g)+"</"+a+">":e[16]?t="<code>"+B(e[16])+"</code>":(e[17]||e[1])&&(t=w(e[17]||"--"))),m+=l,m+=t;return(m+o.substring(f)+M()).replace(/^\n+|\n+$/g,"")}const Mt={class:"flex-col items-center"},zt={class:"text-5"},Pt=d("div",{id:"content"},null,-1),It=L({__name:"Updater",setup(o,{expose:c}){const{t}=E(),l=y(!1),e=y(!1);async function p(){var u,r;try{l.value=!0,await ve(),(u=window.$dialog)==null||u.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>ge()})}catch(m){(r=window.$notification)==null||r.error({title:t("failed to update"),description:`error: ${m}`,content:t("try again")})}finally{l.value=!1}}function a(u){u&&(e.value=!0,we(()=>{const r=document.getElementById("content");r&&(r.innerHTML=D(u))}))}return c({open:a}),(u,r)=>{const m=A,g=se,f=Ae,w=be,M=ne;return S(),te(M,{show:s(e),"onUpdate:show":r[1]||(r[1]=v=>O(e)?e.value=v:null),"mask-closable":!1,class:"w-50%"},{default:$(()=>[i(w,null,{default:$(()=>[i(f,{show:s(l)},{default:$(()=>[d("div",Mt,[d("div",zt,z(s(t)("new ver discover")),1),Pt,i(g,{class:"flex-center mt-4"},{default:$(()=>[i(m,{onClick:r[0]||(r[0]=v=>e.value=!1)},{default:$(()=>[H(z(s(t)("cancel")),1)]),_:1}),i(m,{type:"success",onClick:p},{default:$(()=>[H(z(s(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const Zt={class:"flex-col px-10 gap-y-4"},Tt={class:"flex items-center"},Vt={class:"text-8"},Bt={class:"flex-center grow"},Ht=d("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Lt={class:"ml-auto flex text-8 gap-x-2"},Ut={class:"flex-center"},Rt={class:"flex"},Nt={class:"text-5 mr-2"},At={class:"flex"},Dt={class:"text-5 mr-2"},Et={class:"flex-center"},cn=L({__name:"index",setup(o){const{t:c}=E(),t=y(""),l=y(!1),e=y(),p=N(),{updateCheckTime:a,getServer:u}=N(),r=y(),m=y();async function g(){var _,n;try{const h=await Ze();(_=window.$message)==null||_.success(h)}catch(h){(n=window.$message)==null||n.error(h)}}const f=y("8080"),w=y(!1);function M(_){if(!/^\d+$/.test(_))return!1;const n=Number(_);return n>0&&n<=65535}async function v(_){var n;try{_?(await J(u),await Q(f.value),w.value=!0):(await X(),w.value=!1)}catch(h){(n=window.$message)==null||n.error(h)}}async function x(){var _;await J(u),await Q(f.value),w.value=!0,(_=m.value)==null||_.launcherAll()}async function q(_){var k,I;const n=Date.now(),h=p.update.lastCheckTime;if(_||!h||h&&h+216e5<n)try{const{shouldUpdate:b,manifest:Z}=await Ce();b&&(Z==null?void 0:Z.body)?(e.value=JSON.parse(Z.body)[p.locale],l.value=!0):(k=window.$message)==null||k.success(c("latest ver now"))}catch(b){(I=window.$notification)==null||I.error({title:c("failed get update info"),description:`error: ${b}`,content:c("retry manually")})}finally{a(n)}}return $e(()=>{var _;if(l.value){const n=(_=window.$notification)==null?void 0:_.info({title:c("new ver discover"),content:c("whether upgrade"),action:()=>C(A,{text:!0,type:"primary",onClick:()=>{var h;n==null||n.destroy(),(h=r.value)==null||h.open(e.value)}},{default:()=>c("confirm")})})}}),xe(async()=>t.value=await ke()),ye(async()=>q()),qe(window,"beforeunload",()=>{w.value&&X()}),(_,n)=>{const h=bt,k=He,I=ht,b=rt,Z=ot,oe=ze,ae=Se,ce=Le,W=se,ie=Xe,G=Me,le=Ge;return S(),P("div",Zt,[d("div",Tt,[d("div",Vt,[i(h)]),d("div",Bt,[Ht,i(k,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:n[0]||(n[0]=V=>q(!0))},{default:$(()=>[H(" v"+z(s(t)),1)]),_:1})]),d("div",Lt,[i(I),i(b),i(Z)])]),i(s(It),{ref_key:"updaterRef",ref:r},null,512),i(s(Ct),{ref_key:"startupItemsRef",ref:m},null,512),d("div",Ut,[i(W,null,{default:$(()=>[i(s(A),{onClick:g},{default:$(()=>[H(z(s(c)("install ca")),1)]),_:1}),i(oe),d("div",Rt,[d("span",Nt,z(s(c)("proxy port")),1),i(ae,{value:s(f),"onUpdate:value":n[1]||(n[1]=V=>O(f)?f.value=V:null),"allow-input":M,class:"w-20!"},null,8,["value"])]),d("div",At,[d("span",Dt,z(s(c)("proxy start")),1),i(ce,{value:s(w),onUpdateValue:v},null,8,["value"])])]),_:1})]),d("div",Et,[i(W,null,{default:$(()=>{var V;return[i(G,{text:s(c)("startup items"),onClick:(V=s(m))==null?void 0:V.show},{default:$(()=>[i(ie)]),_:1},8,["text","onClick"]),i(G,{text:s(c)("launch"),onClick:x},{default:$(()=>[i(le)]),_:1},8,["text"])]}),_:1})])])}}});export{cn as default};
