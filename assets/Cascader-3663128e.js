import{D as B,E as pt,a2 as bt,T as xe,C as yt,u as ce,R as wt,S as $e,V as kt,aX as he,al as qe,ae as We,a4 as Rt,L as fe,M as ke,F as G,G as Ct,H as Ge,K as xt,I as St,ao as Mt,i as Tt,a6 as ee}from"./Icon-c17b099f.js";import{F as Nt,h as Pe,V as Ft,u as Pt,d as Ot,e as _t,N as Kt,c as Xe,a as Lt,S as It}from"./utils-9b01a455.js";import{C as Bt}from"./ChevronRight-d8e0aaad.js";import{_ as Vt}from"./Checkbox-12df3825.js";import{d as re,a1 as E,r as R,a2 as At,h as d,i as Se,c as h,w as Je,ar as zt,a0 as je,p as $t,n as jt}from"./vue-i18n.runtime.esm-bundler-151cb611.js";import{f as De}from"./fade-in-scale-up.cssr-4e8af357.js";import{h as Dt,u as Ee,s as Ce,V as Et,c as Ut,d as Ue}from"./Tooltip-7915c0e9.js";import{j as Ht}from"./index-b92a2438.js";import{N as qt}from"./Selection-da5305fb.js";import{c as Wt}from"./light-736a1114.js";import{m as Gt}from"./light-77d17833.js";const Xt=B("base-menu-mask",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 padding: 14px;
 overflow: hidden;
`,[pt()]),Jt=re({name:"BaseMenuMask",props:{clsPrefix:{type:String,required:!0}},setup(t){bt("-base-menu-mask",Xt,E(t,"clsPrefix"));const l=R(null);let a=null;const r=R(!1);return At(()=>{a!==null&&window.clearTimeout(a)}),Object.assign({message:l,show:r},{showOnce(y,x=1500){a&&window.clearTimeout(a),r.value=!0,l.value=y,a=window.setTimeout(()=>{r.value=!1,l.value=null},x)}})},render(){return d(xe,{name:"fade-in-transition"},{default:()=>this.show?d("div",{class:`${this.clsPrefix}-base-menu-mask`},this.message):null})}});function Re(t){return t?t.map(l=>l.rawNode):null}function Qt(t,l,a,r){const v=[],y=[];function x(m){for(const w of m){if(w.disabled)continue;const{rawNode:S}=w;y.push(S),(w.isLeaf||!l)&&v.push({label:Oe(w,r,a),value:w.key,rawNode:w.rawNode,path:Array.from(y)}),!w.isLeaf&&w.children&&x(w.children),y.pop()}}return x(t),v}function Oe(t,l,a){const r=[];for(;t;)r.push(t.rawNode[a]),t=t.parent;return r.reverse().join(l)}const ve=yt("n-cascader"),He=re({name:"NCascaderOption",props:{tmNode:{type:Object,required:!0}},setup(t){const{expandTriggerRef:l,remoteRef:a,multipleRef:r,mergedValueRef:v,checkedKeysRef:y,indeterminateKeysRef:x,hoverKeyPathRef:m,keyboardKeyRef:w,loadingKeySetRef:S,cascadeRef:C,mergedCheckStrategyRef:_,onLoadRef:A,mergedClsPrefixRef:K,mergedThemeRef:X,labelFieldRef:Y,showCheckboxRef:M,updateHoverKey:g,updateKeyboardKey:L,addLoadingKey:P,deleteLoadingKey:O,closeMenu:I,doCheck:j,doUncheck:te,renderLabelRef:ne}=Se(ve),z=h(()=>t.tmNode.key),u=h(()=>{const{value:T}=l,{value:W}=a;return!W&&T==="hover"}),N=h(()=>{if(u.value)return Q}),V=h(()=>{if(u.value)return ue}),F=ce(()=>{const{value:T}=r;return T?y.value.includes(z.value):v.value===z.value}),U=ce(()=>r.value?x.value.includes(z.value):!1),H=ce(()=>m.value.includes(z.value)),ie=ce(()=>{const{value:T}=w;return T===null?!1:T===z.value}),Me=ce(()=>a.value?S.value.has(z.value):!1),se=h(()=>t.tmNode.isLeaf),D=h(()=>t.tmNode.disabled),me=h(()=>t.tmNode.rawNode[Y.value]),q=h(()=>t.tmNode.shallowLoaded);function J(T){if(D.value)return;const{value:W}=a,{value:pe}=S,{value:be}=A,{value:k}=z,{value:Te}=se,{value:$}=q;Pe(T,"checkbox")||(W&&!$&&!pe.has(k)&&be&&(P(k),be(t.tmNode.rawNode).then(()=>{O(k)}).catch(()=>{O(k)})),g(k),L(k)),Te&&ae()}function Q(){if(!u.value||D.value)return;const{value:T}=z;g(T),L(T)}function ue(){u.value&&Q()}function ge(){const{value:T}=se;T||ae()}function ae(){const{value:T}=r,{value:W}=z;T?U.value||F.value?te(W):j(W):(j(W),I(!0))}return{checkStrategy:_,multiple:r,cascade:C,checked:F,indeterminate:U,hoverPending:H,keyboardPending:ie,isLoading:Me,showCheckbox:M,isLeaf:se,disabled:D,label:me,mergedClsPrefix:K,mergedTheme:X,handleClick:J,handleCheckboxUpdateValue:ge,mergedHandleMouseEnter:N,mergedHandleMouseMove:V,renderLabel:ne}},render(){const{mergedClsPrefix:t,renderLabel:l}=this;return d("div",{class:[`${t}-cascader-option`,{[`${t}-cascader-option--pending`]:this.keyboardPending||this.hoverPending,[`${t}-cascader-option--disabled`]:this.disabled,[`${t}-cascader-option--show-prefix`]:this.showCheckbox}],onMouseenter:this.mergedHandleMouseEnter,onMousemove:this.mergedHandleMouseMove,onClick:this.handleClick},this.showCheckbox?d("div",{class:`${t}-cascader-option__prefix`},d(Vt,{focusable:!1,"data-checkbox":!0,disabled:this.disabled,checked:this.checked,indeterminate:this.indeterminate,theme:this.mergedTheme.peers.Checkbox,themeOverrides:this.mergedTheme.peerOverrides.Checkbox,onUpdateChecked:this.handleCheckboxUpdateValue})):null,d("span",{class:`${t}-cascader-option__label`},l?l(this.tmNode.rawNode,this.checked):this.label),d("div",{class:`${t}-cascader-option__suffix`},d("div",{class:`${t}-cascader-option-icon-placeholder`},this.isLeaf?this.checkStrategy==="child"&&!(this.multiple&&this.cascade)?d(xe,{name:"fade-in-scale-up-transition"},{default:()=>this.checked?d($e,{clsPrefix:t,class:`${t}-cascader-option-icon ${t}-cascader-option-icon--checkmark`},{default:()=>d(Nt,null)}):null}):null:d(wt,{clsPrefix:t,scale:.85,strokeWidth:24,show:this.isLoading,class:`${t}-cascader-option-icon`},{default:()=>d($e,{clsPrefix:t,key:"arrow",class:`${t}-cascader-option-icon ${t}-cascader-option-icon--arrow`},{default:()=>d(Bt,null)})}))))}}),Yt=re({name:"CascaderSubmenu",props:{depth:{type:Number,required:!0},tmNodes:{type:Array,required:!0}},setup(){const{virtualScrollRef:t,mergedClsPrefixRef:l,mergedThemeRef:a,optionHeightRef:r}=Se(ve),v=R(null),y=R(null),x={scroll(m,w){var S,C;t.value?(S=y.value)===null||S===void 0||S.scrollTo({index:m}):(C=v.value)===null||C===void 0||C.scrollTo({index:m,elSize:w})}};return Object.assign({mergedClsPrefix:l,mergedTheme:a,scrollbarInstRef:v,vlInstRef:y,virtualScroll:t,itemSize:h(()=>he(r.value)),handleVlScroll:()=>{var m;(m=v.value)===null||m===void 0||m.sync()},getVlContainer:()=>{var m;return(m=y.value)===null||m===void 0?void 0:m.listElRef},getVlContent:()=>{var m;return(m=y.value)===null||m===void 0?void 0:m.itemsElRef}},x)},render(){const{mergedClsPrefix:t,mergedTheme:l,virtualScroll:a}=this;return d("div",{class:[a&&`${t}-cascader-submenu--virtual`,`${t}-cascader-submenu`]},d(kt,{ref:"scrollbarInstRef",theme:l.peers.Scrollbar,themeOverrides:l.peerOverrides.Scrollbar,container:a?this.getVlContainer:void 0,content:a?this.getVlContent:void 0},{default:()=>a?d(Ft,{items:this.tmNodes,itemSize:this.itemSize,onScroll:this.handleVlScroll,showScrollbar:!1,ref:"vlInstRef"},{default:({item:r})=>d(He,{key:r.key,tmNode:r})}):this.tmNodes.map(r=>d(He,{key:r.key,tmNode:r}))}))}}),Zt=re({name:"NCascaderMenu",props:{value:[String,Number,Array],placement:{type:String,default:"bottom-start"},show:Boolean,menuModel:{type:Array,required:!0},loading:Boolean,onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0},onKeydown:{type:Function,required:!0},onMousedown:{type:Function,required:!0},onTabout:{type:Function,required:!0}},setup(t){const{localeRef:l,isMountedRef:a,mergedClsPrefixRef:r,syncCascaderMenuPosition:v,handleCascaderMenuClickOutside:y,mergedThemeRef:x}=Se(ve),m=[],w=R(null),S=R(null);function C(){v()}Pt(S,C);function _(M){var g;const{value:{loadingRequiredMessage:L}}=l;(g=w.value)===null||g===void 0||g.showOnce(L(M))}function A(M){y(M)}function K(M){const{value:g}=S;g&&(g.contains(M.relatedTarget)||t.onFocus(M))}function X(M){const{value:g}=S;g&&(g.contains(M.relatedTarget)||t.onBlur(M))}return Object.assign({isMounted:a,mergedClsPrefix:r,selfElRef:S,submenuInstRefs:m,maskInstRef:w,mergedTheme:x,handleFocusin:K,handleFocusout:X,handleClickOutside:A},{scroll(M,g,L){const P=m[M];P&&P.scroll(g,L)},showErrorMessage:_})},render(){const{submenuInstRefs:t,mergedClsPrefix:l,mergedTheme:a}=this;return d(xe,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.show?Je(d("div",{tabindex:"0",ref:"selfElRef",class:`${l}-cascader-menu`,onMousedown:this.onMousedown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeydown:this.onKeydown},this.menuModel[0].length?d("div",{class:`${l}-cascader-submenu-wrapper`},this.menuModel.map((r,v)=>d(Yt,{ref:y=>{y&&(t[v]=y)},key:v,tmNodes:r,depth:v+1})),d(Jt,{clsPrefix:l,ref:"maskInstRef"})):d("div",{class:`${l}-cascader-menu__empty`},We(this.$slots.empty,()=>[d(_t,{theme:a.peers.Empty,themeOverrides:a.peerOverrides.Empty})])),Rt(this.$slots.action,r=>r&&d("div",{class:`${l}-cascader-menu-action`,"data-action":!0},r)),d(Ot,{onFocus:this.onTabout})),[[qe,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),en=re({name:"NCascaderSelectMenu",props:{value:{type:[String,Number,Array],default:null},show:Boolean,pattern:{type:String,default:""},multiple:Boolean,tmNodes:{type:Array,default:()=>[]},filter:Function,labelField:{type:String,required:!0},separator:{type:String,required:!0}},setup(t){const{isMountedRef:l,mergedValueRef:a,mergedClsPrefixRef:r,mergedThemeRef:v,mergedCheckStrategyRef:y,slots:x,syncSelectMenuPosition:m,closeMenu:w,handleSelectMenuClickOutside:S,doUncheck:C,doCheck:_,clearPattern:A}=Se(ve),K=R(null),X=h(()=>Qt(t.tmNodes,y.value==="child",t.labelField,t.separator)),Y=h(()=>{const{filter:u}=t;if(u)return u;const{labelField:N}=t;return(V,F,U)=>U.some(H=>H[N]&&~H[N].indexOf(V))}),M=h(()=>{const{pattern:u}=t,{value:N}=Y;return(u?X.value.filter(V=>N(u,V.rawNode,V.path)):X.value).map(V=>({value:V.value,label:V.label}))}),g=h(()=>Xe(M.value,Lt("value","children")));function L(){m()}function P(u){O(u)}function O(u){if(t.multiple){const{value:N}=a;Array.isArray(N)?N.includes(u.key)?C(u.key):_(u.key):N===null&&_(u.key),A()}else _(u.key),w(!0)}function I(){var u;(u=K.value)===null||u===void 0||u.prev()}function j(){var u;(u=K.value)===null||u===void 0||u.next()}function te(){var u;if(K){const N=(u=K.value)===null||u===void 0?void 0:u.getPendingTmNode();return N&&O(N),!0}return!1}function ne(u){S(u)}return Object.assign({isMounted:l,mergedTheme:v,mergedClsPrefix:r,menuInstRef:K,selectTreeMate:g,handleResize:L,handleToggle:P,handleClickOutside:ne,cascaderSlots:x},{prev:I,next:j,enter:te})},render(){const{mergedClsPrefix:t,isMounted:l,mergedTheme:a,cascaderSlots:r}=this;return d(xe,{name:"fade-in-scale-up-transition",appear:l},{default:()=>this.show?Je(d(Kt,{ref:"menuInstRef",onResize:this.handleResize,clsPrefix:t,class:`${t}-cascader-menu`,autoPending:!0,themeOverrides:a.peerOverrides.InternalSelectMenu,theme:a.peers.InternalSelectMenu,treeMate:this.selectTreeMate,multiple:this.multiple,value:this.value,onToggle:this.handleToggle},{empty:()=>We(r["not-found"],()=>[])}),[[qe,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),tn=fe([B("cascader-menu",`
 outline: none;
 position: relative;
 margin: 4px 0;
 display: flex;
 flex-flow: column nowrap;
 border-radius: var(--n-menu-border-radius);
 overflow: hidden;
 box-shadow: var(--n-menu-box-shadow);
 color: var(--n-option-text-color);
 background-color: var(--n-menu-color);
 `,[De({transformOrigin:"inherit",duration:"0.2s"}),ke("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),B("scrollbar",{width:"100%"}),B("base-menu-mask",{backgroundColor:"var(--n-menu-mask-color)"}),B("base-loading",{color:"var(--n-loading-color)"}),B("cascader-submenu-wrapper",`
 position: relative;
 display: flex;
 flex-wrap: nowrap;
 `),B("cascader-submenu",`
 height: var(--n-menu-height);
 min-width: var(--n-column-width);
 position: relative;
 `,[G("virtual",`
 width: var(--n-column-width);
 `),B("scrollbar-content",{position:"relative"}),fe("&:first-child",`
 border-top-left-radius: var(--n-menu-border-radius);
 border-bottom-left-radius: var(--n-menu-border-radius);
 `),fe("&:last-child",`
 border-top-right-radius: var(--n-menu-border-radius);
 border-bottom-right-radius: var(--n-menu-border-radius);
 `),fe("&:not(:first-child)",`
 border-left: 1px solid var(--n-menu-divider-color);
 `)]),B("cascader-menu-action",`
 box-sizing: border-box;
 padding: 8px;
 border-top: 1px solid var(--n-menu-divider-color);
 `),B("cascader-option",`
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 padding: 0 0 0 18px;
 box-sizing: border-box;
 min-width: 182px;
 background-color: #0000;
 display: flex;
 align-items: center;
 white-space: nowrap;
 position: relative;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color 0.2s var(--n-bezier);
 `,[G("show-prefix",{paddingLeft:0}),ke("label",`
 flex: 1 0 0;
 overflow: hidden;
 text-overflow: ellipsis;
 `),ke("prefix",{width:"32px",display:"flex",alignItems:"center",justifyContent:"center"}),ke("suffix",{width:"32px",display:"flex",alignItems:"center",justifyContent:"center"}),B("cascader-option-icon-placeholder",{lineHeight:0,position:"relative",width:"16px",height:"16px",fontSize:"16px"},[B("cascader-option-icon",[G("checkmark",{color:"var(--n-option-check-mark-color)"},[De({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})]),G("arrow",{color:"var(--n-option-arrow-color)"})])]),G("selected",{color:"var(--n-option-text-color-active)"}),G("active",{color:"var(--n-option-text-color-active)",backgroundColor:"var(--n-option-color-hover)"}),G("pending",{backgroundColor:"var(--n-option-color-hover)"}),fe("&:hover",{backgroundColor:"var(--n-option-color-hover)"}),G("disabled",`
 color: var(--n-option-text-color-disabled);
 background-color: #0000;
 cursor: not-allowed;
 `,[B("cascader-option-icon",[G("arrow",{color:"var(--n-option-text-color-disabled)"})])])])]),B("cascader",`
 z-index: auto;
 position: relative;
 width: 100%;
 `)]),nn=Object.assign(Object.assign({},Ge.props),{allowCheckingNotLoaded:Boolean,to:Ce.propTo,bordered:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},value:[String,Number,Array],defaultValue:{type:[String,Number,Array],default:null},placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},disabledField:{type:String,default:"disabled"},expandTrigger:{type:String,default:"click"},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},remote:Boolean,onLoad:Function,separator:{type:String,default:" / "},filter:Function,placement:{type:String,default:"bottom-start"},cascade:{type:Boolean,default:!0},leafOnly:Boolean,showPath:{type:Boolean,default:!0},show:{type:Boolean,default:void 0},maxTagCount:[String,Number],menuProps:Object,filterMenuProps:Object,virtualScroll:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},valueField:{type:String,default:"value"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},renderLabel:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onBlur:Function,onFocus:Function,onChange:[Function,Array]}),mn=re({name:"Cascader",props:nn,setup(t,{slots:l}){const{mergedBorderedRef:a,mergedClsPrefixRef:r,namespaceRef:v,inlineThemeDisabled:y}=Ct(t),x=Ge("Cascader","-cascader",tn,Wt,t,r),{localeRef:m}=Dt("Cascader"),w=R(t.defaultValue),S=h(()=>t.value),C=Ee(S,w),_=h(()=>t.leafOnly?"child":t.checkStrategy),A=R(""),K=Ht(t),{mergedSizeRef:X,mergedDisabledRef:Y,mergedStatusRef:M}=K,g=R(null),L=R(null),P=R(null),O=R(null),I=R(null),j=R(new Set),te=R(null),ne=R(null),z=Ce(t),u=R(!1),N=e=>{j.value.add(e)},V=e=>{j.value.delete(e)},F=h(()=>{const{valueField:e,childrenField:n,disabledField:o}=t;return Xe(t.options,{getDisabled(c){return c[o]},getKey(c){return c[e]},getChildren(c){return c[n]}})}),U=h(()=>{const{cascade:e,multiple:n}=t;return n&&Array.isArray(C.value)?F.value.getCheckedKeys(C.value,{cascade:e,allowNotLoaded:t.allowCheckingNotLoaded}):{checkedKeys:[],indeterminateKeys:[]}}),H=h(()=>U.value.checkedKeys),ie=h(()=>U.value.indeterminateKeys),Me=h(()=>{const{treeNodePath:e,treeNode:n}=F.value.getPath(I.value);let o;return n===null?o=[F.value.treeNodes]:(o=e.map(c=>c.siblings),!n.isLeaf&&!j.value.has(n.key)&&n.children&&o.push(n.children)),o}),se=h(()=>{const{keyPath:e}=F.value.getPath(I.value);return e}),D=h(()=>x.value.self.optionHeight);zt(t.options)&&je(t.options,(e,n)=>{e!==n&&(I.value=null,O.value=null)});function me(e){const{onUpdateShow:n,"onUpdate:show":o}=t;n&&ee(n,e),o&&ee(o,e),pe.value=e}function q(e,n,o){const{onUpdateValue:c,"onUpdate:value":i,onChange:p}=t,{nTriggerFormInput:s,nTriggerFormChange:b}=K;c&&ee(c,e,n,o),i&&ee(i,e,n,o),p&&ee(p,e,n,o),w.value=e,s(),b()}function J(e){O.value=e}function Q(e){I.value=e}function ue(e){const{value:{getNode:n}}=F;return e.map(o=>{var c;return((c=n(o))===null||c===void 0?void 0:c.rawNode)||null})}function ge(e){var n;const{cascade:o,multiple:c,filterable:i}=t,{value:{check:p,getNode:s,getPath:b}}=F;if(c)try{const{checkedKeys:f}=p(e,U.value.checkedKeys,{cascade:o,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded});q(f,ue(f),f.map(oe=>{var de;return Re((de=b(oe))===null||de===void 0?void 0:de.treeNodePath)})),i&&Ne(),O.value=e,I.value=e}catch(f){if(f instanceof It){if(g.value){const oe=s(e);oe!==null&&g.value.showErrorMessage(oe.rawNode[t.labelField])}}else throw f}else if(_.value==="child"){const f=s(e);if(f!=null&&f.isLeaf)q(e,f.rawNode,Re(b(e).treeNodePath));else return!1}else{const f=s(e);q(e,(f==null?void 0:f.rawNode)||null,Re((n=b(e))===null||n===void 0?void 0:n.treeNodePath))}return!0}function ae(e){const{cascade:n,multiple:o}=t;if(o){const{value:{uncheck:c,getNode:i,getPath:p}}=F,{checkedKeys:s}=c(e,U.value.checkedKeys,{cascade:n,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded});q(s,s.map(b=>{var f;return((f=i(b))===null||f===void 0?void 0:f.rawNode)||null}),s.map(b=>{var f;return Re((f=p(b))===null||f===void 0?void 0:f.treeNodePath)})),O.value=e,I.value=e}}const T=h(()=>{if(t.multiple){const{showPath:e,separator:n,labelField:o,cascade:c}=t,{getCheckedKeys:i,getNode:p}=F.value;return i(H.value,{cascade:c,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded}).checkedKeys.map(b=>{const f=p(b);return f===null?{label:String(b),value:b}:{label:e?Oe(f,n,o):f.rawNode[o],value:f.key}})}else return[]}),W=h(()=>{const{multiple:e,showPath:n,separator:o,labelField:c}=t,{value:i}=C;if(!e&&!Array.isArray(i)){const{getNode:p}=F.value;if(i===null)return null;const s=p(i);return s===null?{label:String(i),value:i}:{label:n?Oe(s,o,c):s.rawNode[c],value:s.key}}else return null}),pe=R(!1),be=E(t,"show"),k=Ee(be,pe),Te=h(()=>{const{placeholder:e}=t;return e!==void 0?e:m.value.placeholder}),$=h(()=>!!(t.filterable&&A.value));je(k,e=>{if(!e||t.multiple)return;const{value:n}=C;!Array.isArray(n)&&n!==null?(O.value=n,I.value=n,jt(()=>{var o;if(!k.value)return;const{value:c}=I;if(C.value!==null){const i=F.value.getNode(c);i&&((o=g.value)===null||o===void 0||o.scroll(i.level,i.index,he(D.value)))}})):(O.value=null,I.value=null)},{immediate:!0});function _e(e){const{onBlur:n}=t,{nTriggerFormBlur:o}=K;n&&ee(n,e),o()}function Ke(e){const{onFocus:n}=t,{nTriggerFormFocus:o}=K;n&&ee(n,e),o()}function Ne(){var e;(e=P.value)===null||e===void 0||e.focusInput()}function Qe(){var e;(e=P.value)===null||e===void 0||e.focus()}function ye(){Y.value||(A.value="",me(!0),t.filterable&&Ne())}function Z(e=!1){e&&Qe(),me(!1),A.value=""}function Le(e){var n;$.value||k.value&&(!((n=P.value)===null||n===void 0)&&n.$el.contains(Mt(e))||Z())}function Ye(e){$.value&&Le(e)}function Ie(){t.clearFilterAfterSelect&&(A.value="")}function we(e){var n,o,c;const{value:i}=O,{value:p}=F;switch(e){case"prev":if(i!==null){const s=p.getPrev(i,{loop:!0});s!==null&&(J(s.key),(n=g.value)===null||n===void 0||n.scroll(s.level,s.index,he(D.value)))}break;case"next":if(i===null){const s=p.getFirstAvailableNode();s!==null&&(J(s.key),(o=g.value)===null||o===void 0||o.scroll(s.level,s.index,he(D.value)))}else{const s=p.getNext(i,{loop:!0});s!==null&&(J(s.key),(c=g.value)===null||c===void 0||c.scroll(s.level,s.index,he(D.value)))}break;case"child":if(i!==null){const s=p.getNode(i);if(s!==null)if(s.shallowLoaded){const b=p.getChild(i);b!==null&&(Q(i),J(b.key))}else{const{value:b}=j;if(!b.has(i)){N(i),Q(i);const{onLoad:f}=t;f&&f(s.rawNode).then(()=>{V(i)}).catch(()=>{V(i)})}}}break;case"parent":if(i!==null){const s=p.getParent(i);if(s!==null){J(s.key);const b=s.getParent();Q(b===null?null:b.key)}}break}}function Be(e){var n,o;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":if(t.filterable&&k.value)break;e.preventDefault();break}if(!Pe(e,"action"))switch(e.key){case" ":if(t.filterable)return;case"Enter":if(!k.value)ye();else{const{value:c}=$,{value:i}=O;if(c)L.value&&L.value.enter()&&Ie();else if(i!==null)if(H.value.includes(i)||ie.value.includes(i))ae(i);else{const p=ge(i);!t.multiple&&p&&Z(!0)}}break;case"ArrowUp":e.preventDefault(),k.value&&($.value?(n=L.value)===null||n===void 0||n.prev():we("prev"));break;case"ArrowDown":e.preventDefault(),k.value?$.value?(o=L.value)===null||o===void 0||o.next():we("next"):ye();break;case"ArrowLeft":e.preventDefault(),k.value&&!$.value&&we("parent");break;case"ArrowRight":e.preventDefault(),k.value&&!$.value&&we("child");break;case"Escape":k.value&&(Gt(e),Z(!0))}}function Ze(e){Be(e)}function et(e){e.stopPropagation(),t.multiple?q([],[],[]):q(null,null,null)}function tt(e){var n;!((n=g.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(u.value=!0,Ke(e))}function nt(e){var n;!((n=g.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(u.value=!1,_e(e),Z())}function at(e){var n;!((n=P.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(u.value=!0,Ke(e))}function lt(e){var n;!((n=P.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(u.value=!1,_e(e))}function ot(e){Pe(e,"action")||t.multiple&&t.filter&&(e.preventDefault(),Ne())}function rt(){Z(!0)}function it(){t.filterable?ye():k.value?Z(!0):ye()}function st(e){A.value=e.target.value}function ut(e){const{multiple:n}=t,{value:o}=C;n&&Array.isArray(o)&&e.value!==void 0?ae(e.value):q(null,null,null)}function Ve(){var e;(e=te.value)===null||e===void 0||e.syncPosition()}function Ae(){var e;(e=ne.value)===null||e===void 0||e.syncPosition()}function dt(){k.value&&($.value?Ve():Ae())}const Fe=h(()=>!!(t.multiple&&t.cascade||_.value!=="child"));$t(ve,{slots:l,mergedClsPrefixRef:r,mergedThemeRef:x,mergedValueRef:C,checkedKeysRef:H,indeterminateKeysRef:ie,hoverKeyPathRef:se,mergedCheckStrategyRef:_,showCheckboxRef:Fe,cascadeRef:E(t,"cascade"),multipleRef:E(t,"multiple"),keyboardKeyRef:O,hoverKeyRef:I,remoteRef:E(t,"remote"),loadingKeySetRef:j,expandTriggerRef:E(t,"expandTrigger"),isMountedRef:xt(),onLoadRef:E(t,"onLoad"),virtualScrollRef:E(t,"virtualScroll"),optionHeightRef:D,localeRef:m,labelFieldRef:E(t,"labelField"),renderLabelRef:E(t,"renderLabel"),syncCascaderMenuPosition:Ae,syncSelectMenuPosition:Ve,updateKeyboardKey:J,updateHoverKey:Q,addLoadingKey:N,deleteLoadingKey:V,doCheck:ge,doUncheck:ae,closeMenu:Z,handleSelectMenuClickOutside:Ye,handleCascaderMenuClickOutside:Le,clearPattern:Ie});const ct={focus:()=>{var e;(e=P.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=P.value)===null||e===void 0||e.blur()},getCheckedData:()=>{if(Fe.value){const e=H.value;return{keys:e,options:ue(e)}}return{keys:[],options:[]}},getIndeterminateData:()=>{if(Fe.value){const e=ie.value;return{keys:e,options:ue(e)}}return{keys:[],options:[]}}},ze=h(()=>{const{self:{optionArrowColor:e,optionTextColor:n,optionTextColorActive:o,optionTextColorDisabled:c,optionCheckMarkColor:i,menuColor:p,menuBoxShadow:s,menuDividerColor:b,menuBorderRadius:f,menuHeight:oe,optionColorHover:de,optionHeight:ft,optionFontSize:ht,loadingColor:vt,columnWidth:mt},common:{cubicBezierEaseInOut:gt}}=x.value;return{"--n-bezier":gt,"--n-menu-border-radius":f,"--n-menu-box-shadow":s,"--n-menu-height":oe,"--n-column-width":mt,"--n-menu-color":p,"--n-menu-divider-color":b,"--n-option-height":ft,"--n-option-font-size":ht,"--n-option-text-color":n,"--n-option-text-color-disabled":c,"--n-option-text-color-active":o,"--n-option-color-hover":de,"--n-option-check-mark-color":i,"--n-option-arrow-color":e,"--n-menu-mask-color":Tt(p,{alpha:.75}),"--n-loading-color":vt}}),le=y?St("cascader",void 0,ze,t):void 0;return Object.assign(Object.assign({},ct),{handleTriggerResize:dt,mergedStatus:M,selectMenuFollowerRef:te,cascaderMenuFollowerRef:ne,triggerInstRef:P,selectMenuInstRef:L,cascaderMenuInstRef:g,mergedBordered:a,mergedClsPrefix:r,namespace:v,mergedValue:C,mergedShow:k,showSelectMenu:$,pattern:A,treeMate:F,mergedSize:X,mergedDisabled:Y,localizedPlaceholder:Te,selectedOption:W,selectedOptions:T,adjustedTo:z,menuModel:Me,handleMenuTabout:rt,handleMenuFocus:at,handleMenuBlur:lt,handleMenuKeydown:Ze,handleMenuMousedown:ot,handleTriggerFocus:tt,handleTriggerBlur:nt,handleTriggerClick:it,handleClear:et,handleDeleteOption:ut,handlePatternInput:st,handleKeydown:Be,focused:u,optionHeight:D,mergedTheme:x,cssVars:y?void 0:ze,themeClass:le==null?void 0:le.themeClass,onRender:le==null?void 0:le.onRender})},render(){const{mergedClsPrefix:t}=this;return d("div",{class:`${t}-cascader`},d(Et,null,{default:()=>[d(Ut,null,{default:()=>d(qt,{onResize:this.handleTriggerResize,ref:"triggerInstRef",status:this.mergedStatus,clsPrefix:t,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,focused:this.focused,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onClear:this.handleClear,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onKeydown:this.handleKeydown},{arrow:()=>{var l,a;return(a=(l=this.$slots).arrow)===null||a===void 0?void 0:a.call(l)}})}),d(Ue,{key:"cascaderMenu",ref:"cascaderMenuFollowerRef",show:this.mergedShow&&!this.showSelectMenu,containerClass:this.namespace,placement:this.placement,width:this.options.length?void 0:"target",teleportDisabled:this.adjustedTo===Ce.tdkey,to:this.adjustedTo},{default:()=>{var l;(l=this.onRender)===null||l===void 0||l.call(this);const{menuProps:a}=this;return d(Zt,Object.assign({},a,{ref:"cascaderMenuInstRef",class:[this.themeClass,a==null?void 0:a.class],value:this.mergedValue,show:this.mergedShow&&!this.showSelectMenu,menuModel:this.menuModel,style:[this.cssVars,a==null?void 0:a.style],onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onMousedown:this.handleMenuMousedown,onTabout:this.handleMenuTabout}),{action:()=>{var r,v;return(v=(r=this.$slots).action)===null||v===void 0?void 0:v.call(r)},empty:()=>{var r,v;return(v=(r=this.$slots).empty)===null||v===void 0?void 0:v.call(r)}})}}),d(Ue,{key:"selectMenu",ref:"selectMenuFollowerRef",show:this.mergedShow&&this.showSelectMenu,containerClass:this.namespace,width:"target",placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ce.tdkey},{default:()=>{var l;(l=this.onRender)===null||l===void 0||l.call(this);const{filterMenuProps:a}=this;return d(en,Object.assign({},a,{ref:"selectMenuInstRef",class:[this.themeClass,a==null?void 0:a.class],value:this.mergedValue,show:this.mergedShow&&this.showSelectMenu,pattern:this.pattern,multiple:this.multiple,tmNodes:this.treeMate.treeNodes,filter:this.filter,labelField:this.labelField,separator:this.separator,style:[this.cssVars,a==null?void 0:a.style]}))}})]}))}});export{mn as _};
