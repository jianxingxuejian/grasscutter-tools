import{_ as H}from"./ServerInput.vuevuetypescriptsetuptruelang.27977f86.js";import{t as P,a as x,b$ as M,b as V,d as N,e as j,u as U,g as E,i as K,h as w,bd as q,T as F,c9 as G,b9 as J,ae as X,H as O,r as $,C as W,M as Y,J as _,I as d,K as f,E as k,bg as R,b3 as C,bs as Q,ca as Z,cb as ee,a3 as te,bD as B,cc as ne,cd as se,G as D,z as oe,b5 as ae,D as ie,bt as re,ce,cf as le}from"./index.714f9d26.js";import{i as ue,s as pe,p as de}from"./invoke.fd41cb6b.js";import{a as me}from"./Tooltip.8d59199d.js";import{_ as A}from"./Space.9606762f.js";import{_ as fe}from"./Tag.25ac4519.js";import{_ as _e}from"./Switch.f87ff907.js";import"./MyButton.vuevuetypescriptsetuptruelang.ad92d764.js";import"./request.1ccaa797.js";import"./Dropdown.e5aecdf5.js";import"./utils.fbeafa99.js";import"./ChevronRight.0976b3be.js";import"./InputGroupLabel.3496202b.js";import"./InputGroup.602bd4d6.js";import"./get-slot.af2c1dcf.js";const ge=P([P("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),x("spin-container",{position:"relative"},[x("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[M()])]),x("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),x("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[V("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),x("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),x("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[V("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),he={small:20,medium:18,large:16},ve=Object.assign(Object.assign({},U.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),ye=N({name:"Spin",props:ve,setup(o){const{mergedClsPrefixRef:u,inlineThemeDisabled:t}=j(o),a=U("Spin","-spin",ge,G,o,u),e=E(()=>{const{size:n}=o,{common:{cubicBezierEaseInOut:c},self:i}=a.value,{opacitySpinning:p,color:g,textColor:h}=i,v=typeof n=="number"?J(n):i[X("size",n)];return{"--n-bezier":c,"--n-opacity-spinning":p,"--n-size":v,"--n-color":g,"--n-text-color":h}}),r=t?K("spin",E(()=>{const{size:n}=o;return typeof n=="number"?String(n):n[0]}),e,o):void 0;return{mergedClsPrefix:u,compitableShow:me(o,["spinning","show"]),mergedStrokeWidth:E(()=>{const{strokeWidth:n}=o;if(n!==void 0)return n;const{size:c}=o;return he[typeof c=="number"?"medium":c]}),cssVars:t?void 0:e,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){var o,u;const{$slots:t,mergedClsPrefix:a,description:e}=this,r=t.icon&&this.rotate,n=(e||t.description)&&w("div",{class:`${a}-spin-description`},e||((o=t.description)===null||o===void 0?void 0:o.call(t))),c=t.icon?w("div",{class:[`${a}-spin-body`,this.themeClass]},w("div",{class:[`${a}-spin`,r&&`${a}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):w("div",{class:[`${a}-spin-body`,this.themeClass]},w(q,{clsPrefix:a,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),n);return(u=this.onRender)===null||u===void 0||u.call(this),t.default?w("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},w("div",{class:[`${a}-spin-content`,this.compitableShow&&`${a}-spin-content--spinning`]},t),w(F,{name:"fade-in-transition"},{default:()=>this.compitableShow?c:null})):c}});var we={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function L(o){return o.replace(RegExp("^"+(o.match(/^(\t| )+/)||"")[0],"gm"),"")}function T(o){return(o+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(o,u){var t,a,e,r,n,c=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,i=[],p="",g=u||{},h=0;function v(s){var l=we[s[1]||""],y=i[i.length-1]==s;return l?l[1]?(y?i.pop():i.push(s),l[0|y]):l[0]:s}function m(){for(var s="";i.length;)s+=v(i[i.length-1]);return s}for(o=o.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(s,l,y){return g[l.toLowerCase()]=y,""}).replace(/^\n+|\n+$/g,"");e=c.exec(o);)a=o.substring(h,e.index),h=c.lastIndex,t=e[0],a.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+L(T(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),r=I(L(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",r=r.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+r+"</"+n+">"):e[8]?t='<img src="'+T(e[8])+'" alt="'+T(e[7])+'">':e[10]?(p=p.replace("<a>",'<a href="'+T(e[11]||g[a.toLowerCase()])+'">'),t=m()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+I(e[12]||e[15],g)+"</"+n+">":e[16]?t="<code>"+T(e[16])+"</code>":(e[17]||e[1])&&(t=v(e[17]||"--"))),p+=a,p+=t;return(p+o.substring(h)+m()).replace(/^\n+|\n+$/g,"")}const be={class:"flex-col items-center"},xe={class:"text-5"},$e=k("div",{id:"content"},null,-1),Ce=N({__name:"Updater",setup(o,{expose:u}){const{t}=O(),a=$(!1),e=$(!1);async function r(){var c,i;try{a.value=!0,await Z(),(c=window.$dialog)==null||c.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>ee()})}catch(p){(i=window.$notification)==null||i.error({title:t("failed to update"),description:`error: ${p}`,content:t("try again")})}finally{a.value=!1}}function n(c){c&&(e.value=!0,te(()=>{const i=document.getElementById("content");i&&(i.innerHTML=I(c))}))}return u({open:n}),(c,i)=>{const p=B,g=A,h=ye,v=ne,m=se;return W(),Y(m,{show:f(e),"onUpdate:show":i[1]||(i[1]=s=>Q(e)?e.value=s:null),"mask-closable":!1,class:"w-50%"},{default:_(()=>[d(v,null,{default:_(()=>[d(h,{show:f(a)},{default:_(()=>[k("div",be,[k("div",xe,R(f(t)("new ver discover")),1),$e,d(g,{class:"flex-center mt-4"},{default:_(()=>[d(p,{onClick:i[0]||(i[0]=s=>e.value=!1)},{default:_(()=>[C(R(f(t)("cancel")),1)]),_:1}),d(p,{type:"success",onClick:r},{default:_(()=>[C(R(f(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const ke={class:"flex-col px-10 gap-y-4"},Se={class:"flex-center"},ze=k("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Te={class:"text-6"},je=N({__name:"index",setup(o){const{t:u}=O(),t=$(""),a=$(!1),e=$(),r=D(),{updateProxy:n,updateCheckTime:c,getServer:i}=D(),p=$();async function g(m){var y,S;const s=Date.now(),l=r.update.lastCheckTime;if(m||!l||l&&l+864e5<s)try{const{shouldUpdate:z,manifest:b}=await ce();c(s),z&&(b==null?void 0:b.body)?(e.value=JSON.parse(b.body)[r.locale],a.value=!0):(y=window.$message)==null||y.success(u("latest ver now"))}catch(z){(S=window.$notification)==null||S.error({title:u("failed get update info"),description:`error: ${z}`,content:u("retry manually")})}}async function h(){var m,s;try{const l=await ue();(m=window.$message)==null||m.success(l)}catch(l){(s=window.$message)==null||s.error(l)}}async function v(){await pe(i),console.log(i),de()}return oe(()=>{var m;if(a.value){const s=(m=window.$notification)==null?void 0:m.info({title:u("new ver discover"),content:u("whether upgrade"),action:()=>w(B,{text:!0,type:"primary",onClick:()=>{var l;s==null||s.destroy(),(l=p.value)==null||l.open(e.value)}},{default:()=>u("confirm")})})}}),ae(async()=>{t.value=await le(),g()}),(m,s)=>{const l=fe,y=_e,S=A,z=H;return W(),ie("div",ke,[k("div",Se,[ze,d(l,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:s[0]||(s[0]=b=>g(!0))},{default:_(()=>[C(" v"+R(f(t)),1)]),_:1})]),d(f(Ce),{ref_key:"updaterRef",ref:p},null,512),d(S,{class:"flex-center"},{default:_(()=>[k("span",Te,R(f(u)("use proxy system")),1),d(y,{value:f(r).proxy.enable,"onUpdate:value":s[1]||(s[1]=b=>f(n)({enable:b}))},null,8,["value"]),re(' <n-input-number v-if="setting.proxy.enable" :show-button="false" class="w-22!" /> ')]),_:1}),d(S,null,{default:_(()=>[d(f(B),{onClick:h},{default:_(()=>[C("\u5B89\u88C5\u8BC1\u4E66")]),_:1}),d(f(B),{onClick:v},{default:_(()=>[C("\u5F00\u542F")]),_:1}),d(f(B),{onClick:v},{default:_(()=>[C("\u5173\u95ED")]),_:1}),d(z)]),_:1})])}}});export{je as default};
