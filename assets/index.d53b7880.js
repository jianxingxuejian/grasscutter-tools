import{t as O,a as S,b$ as Y,b as H,d as R,e as F,u as j,g as N,i as ee,h as b,bd as te,T as ne,c9 as se,b9 as oe,ae,C as T,D as Z,E as C,V as ie,H as A,G as M,r as x,ca as ce,M as K,J as h,I as m,K as c,bs as J,cb as Q,bg as z,b3 as L,cc as re,cd as le,a3 as ue,bD as E,ce as de,z as pe,b5 as me,cf as _e,cg as fe,ch as he}from"./index.2aa0597a.js";import{_ as ge}from"./MyButton.vuevuetypescriptsetuptruelang.280bc799.js";import{_ as ve}from"./ServerInput.vuevuetypescriptsetuptruelang.845feebe.js";import{s as we,_ as ye,i as be,a as xe,p as $e,b as W}from"./SelectFile.vuevuetypescriptsetuptruelang.724e21d6.js";import{a as qe}from"./Tooltip.1c1ad002.js";import{_ as X}from"./Space.f44725ad.js";import{_ as ke}from"./Tag.965de2b2.js";import{a as Ce}from"./Switch.864a6865.js";import"./request.3d011a7d.js";import"./Dropdown.a95367e9.js";import"./utils.1bff8aef.js";import"./ChevronRight.8ae6c8e5.js";import"./InputGroupLabel.0a97c340.js";import"./get-slot.af2c1dcf.js";const Se=O([O("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),S("spin-container",{position:"relative"},[S("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Y()])]),S("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),S("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[H("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),S("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),S("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[H("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),ze={small:20,medium:18,large:16},Pe=Object.assign(Object.assign({},j.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),Te=R({name:"Spin",props:Pe,setup(i){const{mergedClsPrefixRef:l,inlineThemeDisabled:t}=F(i),o=j("Spin","-spin",Se,se,i,l),e=N(()=>{const{size:n}=i,{common:{cubicBezierEaseInOut:d},self:r}=o.value,{opacitySpinning:_,color:g,textColor:v}=r,f=typeof n=="number"?oe(n):r[ae("size",n)];return{"--n-bezier":d,"--n-opacity-spinning":_,"--n-size":f,"--n-color":g,"--n-text-color":v}}),p=t?ee("spin",N(()=>{const{size:n}=i;return typeof n=="number"?String(n):n[0]}),e,i):void 0;return{mergedClsPrefix:l,compitableShow:qe(i,["spinning","show"]),mergedStrokeWidth:N(()=>{const{strokeWidth:n}=i;if(n!==void 0)return n;const{size:d}=i;return ze[typeof d=="number"?"medium":d]}),cssVars:t?void 0:e,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var i,l;const{$slots:t,mergedClsPrefix:o,description:e}=this,p=t.icon&&this.rotate,n=(e||t.description)&&b("div",{class:`${o}-spin-description`},e||((i=t.description)===null||i===void 0?void 0:i.call(t))),d=t.icon?b("div",{class:[`${o}-spin-body`,this.themeClass]},b("div",{class:[`${o}-spin`,p&&`${o}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):b("div",{class:[`${o}-spin-body`,this.themeClass]},b(te,{clsPrefix:o,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${o}-spin`}),n);return(l=this.onRender)===null||l===void 0||l.call(this),t.default?b("div",{class:[`${o}-spin-container`,this.themeClass],style:this.cssVars},b("div",{class:[`${o}-spin-content`,this.compitableShow&&`${o}-spin-content--spinning`]},t),b(ne,{name:"fade-in-transition"},{default:()=>this.compitableShow?d:null})):d}}),Be={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ie=C("path",{fill:"currentColor",d:"M7.1 11.35q.35-.7.725-1.35q.375-.65.825-1.3l-1.4-.275l-2.1 2.1Zm12.05-6.875q-1.75.05-3.737 1.025q-1.988.975-3.613 2.6q-1.05 1.05-1.875 2.25T8.7 12.6l2.85 2.825q1.05-.4 2.25-1.225q1.2-.825 2.25-1.875q1.625-1.625 2.6-3.6Q19.625 6.75 19.675 5q0-.1-.037-.2q-.038-.1-.113-.175q-.075-.075-.175-.113q-.1-.037-.2-.037Zm-5.5 6q-.575-.575-.575-1.413q0-.837.575-1.412t1.425-.575q.85 0 1.425.575q.575.575.575 1.412q0 .838-.575 1.413q-.575.575-1.425.575q-.85 0-1.425-.575Zm-.85 6.55L13.625 19l2.1-2.1l-.275-1.4q-.65.45-1.3.812q-.65.363-1.35.713Zm8.775-13.35q.2 2.75-.9 5.362q-1.1 2.613-3.475 4.988l.5 2.475q.1.5-.05.975q-.15.475-.5.825L14 21.45q-.375.375-.9.287q-.525-.087-.725-.587l-1.525-3.575L6.575 13.3L3 11.775q-.5-.2-.6-.725q-.1-.525.275-.9L5.825 7q.35-.35.838-.5q.487-.15.987-.05l2.475.5q2.375-2.375 4.988-3.475q2.612-1.1 5.362-.9q.2.025.4.112q.2.088.35.238q.15.15.237.35q.088.2.113.4Zm-17.65 12.3q.875-.875 2.137-.888q1.263-.012 2.138.863t.862 2.137q-.012 1.263-.887 2.138q-.625.625-2.087 1.075q-1.463.45-4.038.8q.35-2.575.8-4.038q.45-1.462 1.075-2.087Zm1.425 1.4q-.25.25-.5.913q-.25.662-.35 1.337q.675-.1 1.338-.337q.662-.238.912-.488q.3-.3.325-.725q.025-.425-.275-.725q-.3-.3-.725-.288q-.425.013-.725.313Z"},null,-1),Le=[Ie];function Re(i,l){return T(),Z("svg",Be,Le)}const Ve={name:"material-symbols-rocket-launch-outline-rounded",render:Re},Ne={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Me=ie('<g fill="none" stroke="currentColor" stroke-dasharray="18" stroke-dashoffset="18" stroke-linecap="round" stroke-width="2"><path d="M12 5V19"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.3s" values="18;0"></animate></path><path d="M5 12H19"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="18;0"></animate></path></g>',1),Ee=[Me];function Ue(i,l){return T(),Z("svg",Ne,Ee)}const Ze={name:"line-md-plus",render:Ue},Ae={class:"flex-col items-center gap-y-5"},De=R({__name:"StartupItems",setup(i,{expose:l}){l({show:r,launcher:$});const{t}=A(),o=M(),{updateGamePath:e,updateModPath:p,updateAkebiPath:n}=o,d=x(!1);function r(){d.value=!0}const _=()=>f(e),g=()=>f(p),v=()=>f(n);async function f(a){const s=await we();s&&await a(s)}async function $(){const a=o.mod.path;a&&await u(a);const s=o.launcher.gamePath;s&&await u(s)}async function u(a){var I;const s=a.replace(/\\/g,"/"),w=s.lastIndexOf("/"),q=s.slice(0,w+1),y=s.slice(w+1),{code:k,stderr:B}=await new ce("cmd",["/C",`cd /d ${q} && start ${y}`]).execute();k!==0&&((I=window.$message)==null||I.error(B))}return(a,s)=>{const w=ye,q=Q;return T(),K(q,{show:c(d),"onUpdate:show":s[0]||(s[0]=y=>J(d)?d.value=y:null),preset:"card",title:c(t)("startup items"),"auto-focus":!1,class:"w-70%"},{default:h(()=>[C("div",Ae,[m(w,{value:c(o).launcher.gamePath,"button-text":c(t)("select"),placeholder:c(t)("select game"),onClick:_},null,8,["value","button-text","placeholder"]),m(w,{value:c(o).mod.path,"button-text":c(t)("select"),placeholder:c(t)("select 3dm"),onClick:g},null,8,["value","button-text","placeholder"]),m(w,{value:c(o).launcher.akebiPath,"button-text":c(t)("select"),placeholder:c(t)("select akebi"),onClick:v},null,8,["value","button-text","placeholder"])])]),_:1},8,["show","title"])}}});var Oe={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function G(i){return i.replace(RegExp("^"+(i.match(/^(\t| )+/)||"")[0],"gm"),"")}function P(i){return(i+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function U(i,l){var t,o,e,p,n,d=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,r=[],_="",g=l||{},v=0;function f(u){var a=Oe[u[1]||""],s=r[r.length-1]==u;return a?a[1]?(s?r.pop():r.push(u),a[0|s]):a[0]:u}function $(){for(var u="";r.length;)u+=f(r[r.length-1]);return u}for(i=i.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(u,a,s){return g[a.toLowerCase()]=s,""}).replace(/^\n+|\n+$/g,"");e=d.exec(i);)o=i.substring(v,e.index),v=d.lastIndex,t=e[0],o.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+G(P(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),p=U(G(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",p=p.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+p+"</"+n+">"):e[8]?t='<img src="'+P(e[8])+'" alt="'+P(e[7])+'">':e[10]?(_=_.replace("<a>",'<a href="'+P(e[11]||g[o.toLowerCase()])+'">'),t=$()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+U(e[12]||e[15],g)+"</"+n+">":e[16]?t="<code>"+P(e[16])+"</code>":(e[17]||e[1])&&(t=f(e[17]||"--"))),_+=o,_+=t;return(_+i.substring(v)+$()).replace(/^\n+|\n+$/g,"")}const He={class:"flex-col items-center"},We={class:"text-5"},Ge=C("div",{id:"content"},null,-1),je=R({__name:"Updater",setup(i,{expose:l}){const{t}=A(),o=x(!1),e=x(!1);async function p(){var d,r;try{o.value=!0,await re(),(d=window.$dialog)==null||d.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>le()})}catch(_){(r=window.$notification)==null||r.error({title:t("failed to update"),description:`error: ${_}`,content:t("try again")})}finally{o.value=!1}}function n(d){d&&(e.value=!0,ue(()=>{const r=document.getElementById("content");r&&(r.innerHTML=U(d))}))}return l({open:n}),(d,r)=>{const _=E,g=X,v=Te,f=de,$=Q;return T(),K($,{show:c(e),"onUpdate:show":r[1]||(r[1]=u=>J(e)?e.value=u:null),"mask-closable":!1,class:"w-50%"},{default:h(()=>[m(f,null,{default:h(()=>[m(v,{show:c(o)},{default:h(()=>[C("div",He,[C("div",We,z(c(t)("new ver discover")),1),Ge,m(g,{class:"flex-center mt-4"},{default:h(()=>[m(_,{onClick:r[0]||(r[0]=u=>e.value=!1)},{default:h(()=>[L(z(c(t)("cancel")),1)]),_:1}),m(_,{type:"success",onClick:p},{default:h(()=>[L(z(c(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const Ke={class:"flex-col items-center px-10 gap-y-4"},Je={class:"flex-center"},Qe=C("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Xe={class:"text-5"},pt=R({__name:"index",setup(i){const{t:l}=A(),t=x(""),o=x(!1),e=x(),p=M(),{updateCheckTime:n,getServer:d}=M(),r=x(),_=x();async function g(u){var w,q;const a=Date.now(),s=p.update.lastCheckTime;if(u||!s||s&&s+864e5<a)try{const{shouldUpdate:y,manifest:k}=await fe();n(a),y&&(k==null?void 0:k.body)?(e.value=JSON.parse(k.body)[p.locale],o.value=!0):(w=window.$message)==null||w.success(l("latest ver now"))}catch(y){(q=window.$notification)==null||q.error({title:l("failed get update info"),description:`error: ${y}`,content:l("retry manually")})}}async function v(){var u,a;try{const s=await be();(u=window.$message)==null||u.success(s)}catch(s){(a=window.$message)==null||a.error(s)}}const f=x(!1);async function $(u){var a;try{u?(await xe(d),await $e(),f.value=!0):(await W(),f.value=!1)}catch(s){(a=window.$message)==null||a.error(s)}}return pe(()=>{var u;if(o.value){const a=(u=window.$notification)==null?void 0:u.info({title:l("new ver discover"),content:l("whether upgrade"),action:()=>b(E,{text:!0,type:"primary",onClick:()=>{var s;a==null||a.destroy(),(s=r.value)==null||s.open(e.value)}},{default:()=>l("confirm")})})}}),me(async()=>{t.value=await he(),g()}),_e(window,"beforeunload",()=>{f.value&&W()}),(u,a)=>{const s=ke,w=ve,q=Ce,y=X,k=Ze,B=ge,I=Ve;return T(),Z("div",Ke,[C("div",Je,[Qe,m(s,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:a[0]||(a[0]=V=>g(!0))},{default:h(()=>[L(" v"+z(c(t)),1)]),_:1})]),m(c(je),{ref_key:"updaterRef",ref:r},null,512),m(c(De),{ref_key:"startupItemsRef",ref:_},null,512),m(y,{class:"flex-center"},{default:h(()=>[m(c(E),{onClick:v},{default:h(()=>[L(z(c(l)("install ca")),1)]),_:1}),m(w),C("span",Xe,z(c(l)("proxy start")),1),m(q,{value:c(f),onUpdateValue:$},null,8,["value"])]),_:1}),m(y,{class:"flex-center"},{default:h(()=>{var V,D;return[m(B,{text:c(l)("startup items"),onClick:(V=c(_))==null?void 0:V.show},{default:h(()=>[m(k)]),_:1},8,["text","onClick"]),m(B,{text:c(l)("launch"),onClick:(D=c(_))==null?void 0:D.launcher},{default:h(()=>[m(I)]),_:1},8,["text","onClick"])]}),_:1})])}}});export{pt as default};
