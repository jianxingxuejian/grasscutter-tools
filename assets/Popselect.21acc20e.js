import{c as k,N as A,b as B,h as I,m as M,d as U,p as O}from"./Tooltip.c89c6eb9.js";import{c as V,a as $,d as R,j as F,e as L,u as y,W as j,g as T,X as z,Y as C,A as D,i as K,h as b,q as E,B as v,r as H,p as q,s as W,Z as x}from"./index.e6b5928e.js";import{c as X}from"./Dropdown.c20ae0f6.js";const N=V("n-popselect"),Y=$("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),_={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},S=E(_),Z=R({name:"PopselectPanel",props:_,setup(e){const n=F(N),{mergedClsPrefixRef:s,inlineThemeDisabled:r}=L(e),h=y("Popselect","-pop-select",Y,j,n.props,s),f=T(()=>k(e.options,B("value","children")));function o(t,d){const{onUpdateValue:a,"onUpdate:value":c,onChange:u}=e;a&&v(a,t,d),c&&v(c,t,d),u&&v(u,t,d)}function l(t){i(t.key)}function p(t){I(t,"action")||t.preventDefault()}function i(t){const{value:{getNode:d}}=f;if(e.multiple)if(Array.isArray(e.value)){const a=[],c=[];let u=!0;e.value.forEach(w=>{if(w===t){u=!1;return}const g=d(w);g&&(a.push(g.key),c.push(g.rawNode))}),u&&(a.push(t),c.push(d(t).rawNode)),o(a,c)}else{const a=d(t);a&&o([t],[a.rawNode])}else if(e.value===t&&e.cancelable)o(null,null);else{const a=d(t);a&&o(t,a.rawNode);const{"onUpdate:show":c,onUpdateShow:u}=n.props;c&&v(c,!1),u&&v(u,!1),n.setShow(!1)}C(()=>{n.syncPosition()})}z(D(e,"options"),()=>{C(()=>{n.syncPosition()})});const P=T(()=>{const{self:{menuBoxShadow:t}}=h.value;return{"--n-menu-box-shadow":t}}),m=r?K("select",void 0,P,n.props):void 0;return{mergedTheme:n.mergedThemeRef,mergedClsPrefix:s,treeMate:f,handleToggle:l,handleMenuMousedown:p,cssVars:r?void 0:P,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),b(A,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{action:()=>{var n,s;return((s=(n=this.$slots).action)===null||s===void 0?void 0:s.call(n))||[]},empty:()=>{var n,s;return((s=(n=this.$slots).empty)===null||s===void 0?void 0:s.call(n))||[]}})}}),G=Object.assign(Object.assign(Object.assign(Object.assign({},y.props),x(O,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},O.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),_),se=R({name:"Popselect",props:G,inheritAttrs:!1,__popover__:!0,setup(e){const n=y("Popselect","-popselect",void 0,j,e),s=H(null);function r(){var o;(o=s.value)===null||o===void 0||o.syncPosition()}function h(o){var l;(l=s.value)===null||l===void 0||l.setShow(o)}return q(N,{props:e,mergedThemeRef:n,syncPosition:r,setShow:h}),Object.assign(Object.assign({},{syncPosition:r,setShow:h}),{popoverInstRef:s,mergedTheme:n})},render(){const{mergedTheme:e}=this,n={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(s,r,h,f,o)=>{const{$attrs:l}=this;return b(Z,Object.assign({},l,{class:[l.class,s],style:[l.style,h]},W(this.$props,S),{ref:X(r),onMouseenter:M([f,l.onMouseenter]),onMouseleave:M([o,l.onMouseleave])}),{action:()=>{var p,i;return(i=(p=this.$slots).action)===null||i===void 0?void 0:i.call(p)},empty:()=>{var p,i;return(i=(p=this.$slots).empty)===null||i===void 0?void 0:i.call(p)}})}};return b(U,Object.assign({},x(this.$props,S),n,{internalDeactivateImmediately:!0}),{trigger:()=>{var s,r;return(r=(s=this.$slots).default)===null||r===void 0?void 0:r.call(s)}})}});export{se as _};
