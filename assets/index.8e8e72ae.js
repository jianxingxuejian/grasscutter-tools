import{_ as M}from"./ServerInput.vuevuetypescriptsetuptruelang.f7189030.js";import{t as P,a as C,b$ as j,b as U,d as N,e as K,u as O,g as V,i as q,h as y,bd as F,T as G,c9 as J,b9 as X,ae as Y,H as W,r as b,C as A,M as Q,J as h,I as m,K as f,E as x,bg as B,b3 as R,bs as Z,ca as ee,cb as te,a3 as ne,bD as E,cc as se,cd as oe,G as L,z as ae,b5 as ie,D as re,bt as ce,ce as le,cf as ue}from"./index.39b1afb0.js";import{i as pe,s as de,p as me,a as fe}from"./invoke.0fcc2bd0.js";import{a as _e}from"./Tooltip.4277f964.js";import{_ as H}from"./Space.d496395e.js";import{_ as ge}from"./Tag.7a0b23fd.js";import{_ as he}from"./Switch.475af710.js";import"./MyButton.vuevuetypescriptsetuptruelang.ed299f17.js";import"./request.ab700367.js";import"./Dropdown.e45a63e8.js";import"./utils.40aaac45.js";import"./ChevronRight.fb1e3feb.js";import"./InputGroupLabel.c970c88c.js";import"./InputGroup.43ea3ee9.js";import"./get-slot.af2c1dcf.js";const ve=P([P("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),C("spin-container",{position:"relative"},[C("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[j()])]),C("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),C("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[U("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),C("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),C("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[U("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),ye={small:20,medium:18,large:16},we=Object.assign(Object.assign({},O.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),be=N({name:"Spin",props:we,setup(s){const{mergedClsPrefixRef:p,inlineThemeDisabled:t}=K(s),o=O("Spin","-spin",ve,J,s,p),e=V(()=>{const{size:n}=s,{common:{cubicBezierEaseInOut:l},self:i}=o.value,{opacitySpinning:d,color:_,textColor:v}=i,g=typeof n=="number"?X(n):i[Y("size",n)];return{"--n-bezier":l,"--n-opacity-spinning":d,"--n-size":g,"--n-color":_,"--n-text-color":v}}),c=t?q("spin",V(()=>{const{size:n}=s;return typeof n=="number"?String(n):n[0]}),e,s):void 0;return{mergedClsPrefix:p,compitableShow:_e(s,["spinning","show"]),mergedStrokeWidth:V(()=>{const{strokeWidth:n}=s;if(n!==void 0)return n;const{size:l}=s;return ye[typeof l=="number"?"medium":l]}),cssVars:t?void 0:e,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){var s,p;const{$slots:t,mergedClsPrefix:o,description:e}=this,c=t.icon&&this.rotate,n=(e||t.description)&&y("div",{class:`${o}-spin-description`},e||((s=t.description)===null||s===void 0?void 0:s.call(t))),l=t.icon?y("div",{class:[`${o}-spin-body`,this.themeClass]},y("div",{class:[`${o}-spin`,c&&`${o}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):y("div",{class:[`${o}-spin-body`,this.themeClass]},y(F,{clsPrefix:o,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${o}-spin`}),n);return(p=this.onRender)===null||p===void 0||p.call(this),t.default?y("div",{class:[`${o}-spin-container`,this.themeClass],style:this.cssVars},y("div",{class:[`${o}-spin-content`,this.compitableShow&&`${o}-spin-content--spinning`]},t),y(G,{name:"fade-in-transition"},{default:()=>this.compitableShow?l:null})):l}});var xe={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function D(s){return s.replace(RegExp("^"+(s.match(/^(\t| )+/)||"")[0],"gm"),"")}function T(s){return(s+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(s,p){var t,o,e,c,n,l=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,i=[],d="",_=p||{},v=0;function g(r){var a=xe[r[1]||""],u=i[i.length-1]==r;return a?a[1]?(u?i.pop():i.push(r),a[0|u]):a[0]:r}function $(){for(var r="";i.length;)r+=g(i[i.length-1]);return r}for(s=s.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(r,a,u){return _[a.toLowerCase()]=u,""}).replace(/^\n+|\n+$/g,"");e=l.exec(s);)o=s.substring(v,e.index),v=l.lastIndex,t=e[0],o.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+D(T(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),c=I(D(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",c=c.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+c+"</"+n+">"):e[8]?t='<img src="'+T(e[8])+'" alt="'+T(e[7])+'">':e[10]?(d=d.replace("<a>",'<a href="'+T(e[11]||_[o.toLowerCase()])+'">'),t=$()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+I(e[12]||e[15],_)+"</"+n+">":e[16]?t="<code>"+T(e[16])+"</code>":(e[17]||e[1])&&(t=g(e[17]||"--"))),d+=o,d+=t;return(d+s.substring(v)+$()).replace(/^\n+|\n+$/g,"")}const $e={class:"flex-col items-center"},Ce={class:"text-5"},ke=x("div",{id:"content"},null,-1),Se=N({__name:"Updater",setup(s,{expose:p}){const{t}=W(),o=b(!1),e=b(!1);async function c(){var l,i;try{o.value=!0,await ee(),(l=window.$dialog)==null||l.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>te()})}catch(d){(i=window.$notification)==null||i.error({title:t("failed to update"),description:`error: ${d}`,content:t("try again")})}finally{o.value=!1}}function n(l){l&&(e.value=!0,ne(()=>{const i=document.getElementById("content");i&&(i.innerHTML=I(l))}))}return p({open:n}),(l,i)=>{const d=E,_=H,v=be,g=se,$=oe;return A(),Q($,{show:f(e),"onUpdate:show":i[1]||(i[1]=r=>Z(e)?e.value=r:null),"mask-closable":!1,class:"w-50%"},{default:h(()=>[m(g,null,{default:h(()=>[m(v,{show:f(o)},{default:h(()=>[x("div",$e,[x("div",Ce,B(f(t)("new ver discover")),1),ke,m(_,{class:"flex-center mt-4"},{default:h(()=>[m(d,{onClick:i[0]||(i[0]=r=>e.value=!1)},{default:h(()=>[R(B(f(t)("cancel")),1)]),_:1}),m(d,{type:"success",onClick:c},{default:h(()=>[R(B(f(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const ze={class:"flex-col px-10 gap-y-4"},Te={class:"flex-center"},Be=x("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Re={class:"text-6"},Ve=x("span",null,"\u5F00\u542F",-1),Fe=N({__name:"index",setup(s){const{t:p}=W(),t=b(""),o=b(!1),e=b(),c=L(),{updateProxy:n,updateCheckTime:l,getServer:i}=L(),d=b();async function _(r){var k,S;const a=Date.now(),u=c.update.lastCheckTime;if(r||!u||u&&u+864e5<a)try{const{shouldUpdate:z,manifest:w}=await le();l(a),z&&(w==null?void 0:w.body)?(e.value=JSON.parse(w.body)[c.locale],o.value=!0):(k=window.$message)==null||k.success(p("latest ver now"))}catch(z){(S=window.$notification)==null||S.error({title:p("failed get update info"),description:`error: ${z}`,content:p("retry manually")})}}async function v(){var r,a;try{const u=await pe();(r=window.$message)==null||r.success(u)}catch(u){(a=window.$message)==null||a.error(u)}}const g=b(!1);async function $(r){var a;try{r?(await de(i),await me(),g.value=!0):(await fe(),g.value=!1)}catch(u){(a=window.$message)==null||a.error(u)}}return ae(()=>{var r;if(o.value){const a=(r=window.$notification)==null?void 0:r.info({title:p("new ver discover"),content:p("whether upgrade"),action:()=>y(E,{text:!0,type:"primary",onClick:()=>{var u;a==null||a.destroy(),(u=d.value)==null||u.open(e.value)}},{default:()=>p("confirm")})})}}),ie(async()=>{t.value=await ue(),_()}),(r,a)=>{const u=ge,k=he,S=H,z=M;return A(),re("div",ze,[x("div",Te,[Be,m(u,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:a[0]||(a[0]=w=>_(!0))},{default:h(()=>[R(" v"+B(f(t)),1)]),_:1})]),m(f(Se),{ref_key:"updaterRef",ref:d},null,512),m(S,{class:"flex-center"},{default:h(()=>[x("span",Re,B(f(p)("use proxy system")),1),m(k,{value:f(c).proxy.enable,"onUpdate:value":a[1]||(a[1]=w=>f(n)({enable:w}))},null,8,["value"]),ce(' <n-input-number v-if="setting.proxy.enable" :show-button="false" class="w-22!" /> ')]),_:1}),m(S,null,{default:h(()=>[m(f(E),{onClick:v},{default:h(()=>[R("\u5B89\u88C5\u8BC1\u4E66")]),_:1}),Ve,m(k,{value:f(g),onUpdateValue:$},null,8,["value"]),m(z)]),_:1})])}}});export{Fe as default};
