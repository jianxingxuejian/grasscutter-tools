import{_ as H}from"./ServerInput.vuevuetypescriptsetuptruelang.3934f1c8.js";import{t as N,a as x,b$ as M,b as V,d as I,e as j,u as L,g as R,i as A,h as w,bd as K,T as q,c9 as F,b9 as G,ae as J,H as U,r as $,C as O,M as X,J as _,I as m,K as f,E as k,bg as B,b3 as C,bs as Y,ca as Q,cb as Z,a3 as ee,bD as T,cc as te,cd as ne,G as P,z as se,b5 as oe,D as ie,bt as ae,ce as re,cf as ce}from"./index.9c6d6245.js";import{i as le,p as ue}from"./invoke.020f8451.js";import{a as pe}from"./Tooltip.10ca711d.js";import{_ as W}from"./Space.d169f7f2.js";import{_ as de}from"./Tag.e7126043.js";import{_ as me}from"./Switch.b128aa2f.js";import"./MyButton.vuevuetypescriptsetuptruelang.eb2f3e0f.js";import"./request.5650a198.js";import"./Dropdown.ba4a613e.js";import"./utils.1029fe08.js";import"./ChevronRight.05ff960d.js";import"./InputGroupLabel.ccd65fa3.js";import"./InputGroup.661ced69.js";import"./get-slot.af2c1dcf.js";const fe=N([N("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),x("spin-container",{position:"relative"},[x("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[M()])]),x("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),x("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[V("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),x("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),x("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[V("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),_e={small:20,medium:18,large:16},ge=Object.assign(Object.assign({},L.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),he=I({name:"Spin",props:ge,setup(s){const{mergedClsPrefixRef:u,inlineThemeDisabled:t}=j(s),o=L("Spin","-spin",fe,F,s,u),e=R(()=>{const{size:n}=s,{common:{cubicBezierEaseInOut:c},self:i}=o.value,{opacitySpinning:p,color:y,textColor:h}=i,d=typeof n=="number"?G(n):i[J("size",n)];return{"--n-bezier":c,"--n-opacity-spinning":p,"--n-size":d,"--n-color":y,"--n-text-color":h}}),r=t?A("spin",R(()=>{const{size:n}=s;return typeof n=="number"?String(n):n[0]}),e,s):void 0;return{mergedClsPrefix:u,compitableShow:pe(s,["spinning","show"]),mergedStrokeWidth:R(()=>{const{strokeWidth:n}=s;if(n!==void 0)return n;const{size:c}=s;return _e[typeof c=="number"?"medium":c]}),cssVars:t?void 0:e,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){var s,u;const{$slots:t,mergedClsPrefix:o,description:e}=this,r=t.icon&&this.rotate,n=(e||t.description)&&w("div",{class:`${o}-spin-description`},e||((s=t.description)===null||s===void 0?void 0:s.call(t))),c=t.icon?w("div",{class:[`${o}-spin-body`,this.themeClass]},w("div",{class:[`${o}-spin`,r&&`${o}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),n):w("div",{class:[`${o}-spin-body`,this.themeClass]},w(K,{clsPrefix:o,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${o}-spin`}),n);return(u=this.onRender)===null||u===void 0||u.call(this),t.default?w("div",{class:[`${o}-spin-container`,this.themeClass],style:this.cssVars},w("div",{class:[`${o}-spin-content`,this.compitableShow&&`${o}-spin-content--spinning`]},t),w(q,{name:"fade-in-transition"},{default:()=>this.compitableShow?c:null})):c}});var ve={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function D(s){return s.replace(RegExp("^"+(s.match(/^(\t| )+/)||"")[0],"gm"),"")}function z(s){return(s+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(s,u){var t,o,e,r,n,c=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,i=[],p="",y=u||{},h=0;function d(a){var g=ve[a[1]||""],v=i[i.length-1]==a;return g?g[1]?(v?i.pop():i.push(a),g[0|v]):g[0]:a}function l(){for(var a="";i.length;)a+=d(i[i.length-1]);return a}for(s=s.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(a,g,v){return y[g.toLowerCase()]=v,""}).replace(/^\n+|\n+$/g,"");e=c.exec(s);)o=s.substring(h,e.index),h=c.lastIndex,t=e[0],o.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+D(z(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),r=E(D(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",r=r.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+r+"</"+n+">"):e[8]?t='<img src="'+z(e[8])+'" alt="'+z(e[7])+'">':e[10]?(p=p.replace("<a>",'<a href="'+z(e[11]||y[o.toLowerCase()])+'">'),t=l()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+E(e[12]||e[15],y)+"</"+n+">":e[16]?t="<code>"+z(e[16])+"</code>":(e[17]||e[1])&&(t=d(e[17]||"--"))),p+=o,p+=t;return(p+s.substring(h)+l()).replace(/^\n+|\n+$/g,"")}const ye={class:"flex-col items-center"},we={class:"text-5"},be=k("div",{id:"content"},null,-1),xe=I({__name:"Updater",setup(s,{expose:u}){const{t}=U(),o=$(!1),e=$(!1);async function r(){var c,i;try{o.value=!0,await Q(),(c=window.$dialog)==null||c.success({title:t("install successful"),content:t("whether relaunch"),negativeText:t("cancel"),positiveText:t("relaunch"),onPositiveClick:()=>Z()})}catch(p){(i=window.$notification)==null||i.error({title:t("failed to update"),description:`error: ${p}`,content:t("try again")})}finally{o.value=!1}}function n(c){c&&(e.value=!0,ee(()=>{const i=document.getElementById("content");i&&(i.innerHTML=E(c))}))}return u({open:n}),(c,i)=>{const p=T,y=W,h=he,d=te,l=ne;return O(),X(l,{show:f(e),"onUpdate:show":i[1]||(i[1]=a=>Y(e)?e.value=a:null),"mask-closable":!1,class:"w-50%"},{default:_(()=>[m(d,null,{default:_(()=>[m(h,{show:f(o)},{default:_(()=>[k("div",ye,[k("div",we,B(f(t)("new ver discover")),1),be,m(y,{class:"flex-center mt-4"},{default:_(()=>[m(p,{onClick:i[0]||(i[0]=a=>e.value=!1)},{default:_(()=>[C(B(f(t)("cancel")),1)]),_:1}),m(p,{type:"success",onClick:r},{default:_(()=>[C(B(f(t)("update")),1)]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}});const $e={class:"flex-col px-10 gap-y-4"},Ce={class:"flex-center"},ke=k("span",{class:"text-8 flex-center"},"Grasscutter-Tools",-1),Se={class:"text-6"},Me=I({__name:"index",setup(s){const{t:u}=U(),t=$(""),o=$(!1),e=$(),r=P(),{updateProxy:n,updateCheckTime:c}=P(),i=$();async function p(d){var g,v;const l=Date.now(),a=r.update.lastCheckTime;if(d||!a||a&&a+864e5<l)try{const{shouldUpdate:S,manifest:b}=await re();c(l),S&&(b==null?void 0:b.body)?(e.value=JSON.parse(b.body)[r.locale],o.value=!0):(g=window.$message)==null||g.success(u("latest ver now"))}catch(S){(v=window.$notification)==null||v.error({title:u("failed get update info"),description:`error: ${S}`,content:u("retry manually")})}}async function y(){var d,l;try{const a=await le();(d=window.$message)==null||d.success(a)}catch(a){(l=window.$message)==null||l.error(a)}}function h(){ue()}return se(()=>{var d;if(o.value){const l=(d=window.$notification)==null?void 0:d.info({title:u("new ver discover"),content:u("whether upgrade"),action:()=>w(T,{text:!0,type:"primary",onClick:()=>{var a;l==null||l.destroy(),(a=i.value)==null||a.open(e.value)}},{default:()=>u("confirm")})})}}),oe(async()=>{t.value=await ce(),p()}),(d,l)=>{const a=de,g=me,v=W,S=H;return O(),ie("div",$e,[k("div",Ce,[ke,m(a,{type:"success",size:"large",class:"ml-2 cursor-pointer",onClick:l[0]||(l[0]=b=>p(!0))},{default:_(()=>[C(" v"+B(f(t)),1)]),_:1})]),m(f(xe),{ref_key:"updaterRef",ref:i},null,512),m(v,{class:"flex-center"},{default:_(()=>[k("span",Se,B(f(u)("use proxy system")),1),m(g,{value:f(r).proxy.enable,"onUpdate:value":l[1]||(l[1]=b=>f(n)({enable:b}))},null,8,["value"]),ae(' <n-input-number v-if="setting.proxy.enable" :show-button="false" class="w-22!" /> ')]),_:1}),m(v,null,{default:_(()=>[m(f(T),{onClick:y},{default:_(()=>[C("\u5B89\u88C5\u8BC1\u4E66")]),_:1}),m(f(T),{onClick:h},{default:_(()=>[C("\u5F00\u542F")]),_:1}),m(f(T),{onClick:h},{default:_(()=>[C("\u5173\u95ED")]),_:1}),m(S)]),_:1})])}}});export{Me as default};
